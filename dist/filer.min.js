/*! filer 0.0.39 2014-12-17 */
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.Filer=t()}}(function(){var t;return function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);throw Error("Cannot find module '"+a+"'")}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return i(n?n:e)},c,c.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;r.length>a;a++)i(r[a]);return i}({1:[function(e,n){(function(e){(function(){var r={};void 0!==e&&e.nextTick?(r.nextTick=e.nextTick,r.setImmediate="undefined"!=typeof setImmediate?function(t){setImmediate(t)}:r.nextTick):"function"==typeof setImmediate?(r.nextTick=function(t){setImmediate(t)},r.setImmediate=r.nextTick):(r.nextTick=function(t){setTimeout(t,0)},r.setImmediate=r.nextTick),r.eachSeries=function(t,e,n){if(n=n||function(){},!t.length)return n();var r=0,i=function(){e(t[r],function(e){e?(n(e),n=function(){}):(r+=1,r>=t.length?n():i())})};i()},r.forEachSeries=r.eachSeries,t!==void 0&&t.amd?t([],function(){return r}):n!==void 0&&n.exports?n.exports=r:root.async=r})()}).call(this,e("JkpR2F"))},{JkpR2F:10}],2:[function(t,e){function n(t,e){for(var n=e.length-1;n>=0;n--)e[n]===t&&e.splice(n,1);return e}var r=function(){};r.createInterface=function(t){var e={};return e.on=function(e,n){this[t]===void 0&&(this[t]={}),this[t].hasOwnProperty(e)||(this[t][e]=[]),this[t][e].push(n)},e.off=function(e,r){void 0!==this[t]&&this[t].hasOwnProperty(e)&&n(r,this[t][e])},e.trigger=function(e){if(this[t]!==void 0&&this[t].hasOwnProperty(e))for(var n=Array.prototype.slice.call(arguments,1),r=0;this[t][e].length>r;r++)this[t][e][r].apply(this[t][e][r],n)},e.removeAllListeners=function(e){if(void 0!==this[t]){var n=this;n[t][e].forEach(function(t){n.off(e,t)})}},e};var i=r.createInterface("_handlers");r.prototype._on=i.on,r.prototype._off=i.off,r.prototype._trigger=i.trigger;var o=r.createInterface("handlers");r.prototype.on=function(){o.on.apply(this,arguments),Array.prototype.unshift.call(arguments,"on"),this._trigger.apply(this,arguments)},r.prototype.off=o.off,r.prototype.trigger=o.trigger,r.prototype.removeAllListeners=o.removeAllListeners,e.exports=r},{}],3:[function(t,e){(function(n){function r(t,e){var n=0;return function(){var r=Date.now();r-n>t&&(n=r,e.apply(this,arguments))}}function i(t,e){if(void 0!==t&&t||(t={}),"object"==typeof e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function o(){var t=this,e=Date.now();this.origin=s(),this.lastMessage=e,this.receivedIDs={},this.previousValues={};var r=function(){t._onStorageEvent.apply(t,arguments)};"undefined"!=typeof document&&(document.attachEvent?document.attachEvent("onstorage",r):n.addEventListener("storage",r,!1))}var a=t("./eventemitter.js"),s=t("../src/shared.js").guid,u=function(t){return t===void 0||t.localStorage===void 0?{getItem:function(){},setItem:function(){},removeItem:function(){}}:t.localStorage}(n);o.prototype._transaction=function(t){function e(){if(!a){var f=Date.now(),h=0|u.getItem(l);if(h&&r>f-h)return s||(o._on("storage",e),s=!0),c=setTimeout(e,i),void 0;a=!0,u.setItem(l,f),t(),n()}}function n(){s&&o._off("storage",e),c&&clearTimeout(c),u.removeItem(l)}var r=1e3,i=20,o=this,a=!1,s=!1,c=null;e()},o.prototype._cleanup_emit=r(100,function(){var t=this;t._transaction(function(){var t,e=Date.now(),n=e-h,r=0;try{t=JSON.parse(u.getItem(c)||"[]")}catch(i){t=[]}for(var o=t.length-1;o>=0;o--)n>t[o].timestamp&&(t.splice(o,1),r++);r>0&&u.setItem(c,JSON.stringify(t))})}),o.prototype._cleanup_once=r(100,function(){var t=this;t._transaction(function(){var e,n;Date.now();var r=0;try{n=JSON.parse(u.getItem(f)||"{}")}catch(i){n={}}for(e in n)t._once_expired(e,n)&&(delete n[e],r++);r>0&&u.setItem(f,JSON.stringify(n))})}),o.prototype._once_expired=function(t,e){if(!e)return!0;if(!e.hasOwnProperty(t))return!0;if("object"!=typeof e[t])return!0;var n=e[t].ttl||d,r=Date.now(),i=e[t].timestamp;return r-n>i},o.prototype._localStorageChanged=function(t,e){if(t&&t.key)return t.key===e;var n=u.getItem(e);return n===this.previousValues[e]?!1:(this.previousValues[e]=n,!0)},o.prototype._onStorageEvent=function(t){t=t||n.event;var e=this;this._localStorageChanged(t,c)&&this._transaction(function(){var t,n=Date.now(),r=u.getItem(c);try{t=JSON.parse(r||"[]")}catch(i){t=[]}for(var o=0;t.length>o;o++)if(t[o].origin!==e.origin&&!(t[o].timestamp<e.lastMessage)){if(t[o].id){if(e.receivedIDs.hasOwnProperty(t[o].id))continue;e.receivedIDs[t[o].id]=!0}e.trigger(t[o].name,t[o].payload)}e.lastMessage=n}),this._trigger("storage",t)},o.prototype._emit=function(t,e,n){if(n="string"==typeof n||"number"==typeof n?n+"":null,n&&n.length){if(this.receivedIDs.hasOwnProperty(n))return;this.receivedIDs[n]=!0}var r={id:n,name:t,origin:this.origin,timestamp:Date.now(),payload:e},i=this;this._transaction(function(){var n=u.getItem(c)||"[]",o="[]"===n?"":",";n=[n.substring(0,n.length-1),o,JSON.stringify(r),"]"].join(""),u.setItem(c,n),i.trigger(t,e),setTimeout(function(){i._cleanup_emit()},50)})},o.prototype.emit=function(t,e){this._emit.apply(this,arguments),this._trigger("emit",t,e)},o.prototype.once=function(t,e,n){if(o.supported){var r=this;this._transaction(function(){var i;try{i=JSON.parse(u.getItem(f)||"{}")}catch(o){i={}}r._once_expired(t,i)&&(i[t]={},i[t].timestamp=Date.now(),"number"==typeof n&&(i[t].ttl=1e3*n),u.setItem(f,JSON.stringify(i)),e(),setTimeout(function(){r._cleanup_once()},50))})}},i(o.prototype,a.prototype),o.supported=u!==void 0;var c="intercom",f="intercom_once",l="intercom_lock",h=5e4,d=36e5;o.destroy=function(){u.removeItem(l),u.removeItem(c),u.removeItem(f)},o.getInstance=function(){var t;return function(){return t||(t=new o),t}}(),e.exports=o}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../src/shared.js":30,"./eventemitter.js":2}],4:[function(t,e){function n(t,e){return g.call(t,e)}function r(t){return null==t?0:t.length===+t.length?t.length:y(t).length}function i(t){return t}function o(t,e,n){var r,i;if(null!=t)if(l&&t.forEach===l)t.forEach(e,n);else if(t.length===+t.length){for(r=0,i=t.length;i>r;r++)if(e.call(n,t[r],r,t)===v)return}else{var o=o(t);for(r=0,i=o.length;i>r;r++)if(e.call(n,t[o[r]],o[r],t)===v)return}}function a(t,e,n){e||(e=i);var r=!1;return null==t?r:d&&t.some===d?t.some(e,n):(o(t,function(t,i,o){return r||(r=e.call(n,t,i,o))?v:void 0}),!!r)}function s(t,e){return null==t?!1:h&&t.indexOf===h?-1!=t.indexOf(e):a(t,function(t){return t===e})}function u(t){this.value=t}function c(t){return t&&"object"==typeof t&&!Array.isArray(t)&&g.call(t,"__wrapped__")?t:new u(t)}var f=Array.prototype,l=f.forEach,h=f.indexOf,d=f.some,p=Object.prototype,g=p.hasOwnProperty,m=Object.keys,v={},y=m||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var r in t)n(t,r)&&e.push(r);return e};u.prototype.has=function(t){return n(this.value,t)},u.prototype.contains=function(t){return s(this.value,t)},u.prototype.size=function(){return r(this.value)},e.exports=c},{}],5:[function(t,e,n){(function(t){"use strict";n.encode=function(e){var n,r=new Uint8Array(e),i=r.length,o="";for(n=0;i>n;n+=3)o+=t[r[n]>>2],o+=t[(3&r[n])<<4|r[n+1]>>4],o+=t[(15&r[n+1])<<2|r[n+2]>>6],o+=t[63&r[n+2]];return 2===i%3?o=o.substring(0,o.length-1)+"=":1===i%3&&(o=o.substring(0,o.length-2)+"=="),o},n.decode=function(e){var n,r,i,o,a,s=.75*e.length,u=e.length,c=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);var f=new ArrayBuffer(s),l=new Uint8Array(f);for(n=0;u>n;n+=4)r=t.indexOf(e[n]),i=t.indexOf(e[n+1]),o=t.indexOf(e[n+2]),a=t.indexOf(e[n+3]),l[c++]=r<<2|i>>4,l[c++]=(15&i)<<4|o>>2,l[c++]=(3&o)<<6|63&a;return f}})("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],6:[function(t,e,n){function r(t,e,n){if(!(this instanceof r))return new r(t,e,n);var i=typeof t;"base64"===e&&"string"===i&&(t=T(t));var o;if("number"===i)o=D(t);else if("string"===i)o=r.byteLength(t,e);else{if("object"!==i)throw Error("First argument needs to be a number, array or string.");o=D(t.length)}var a;r._useTypedArrays?a=r._augment(new Uint8Array(o)):(a=this,a.length=o,a._isBuffer=!0);var s;if(r._useTypedArrays&&"number"==typeof t.byteLength)a._set(t);else if(L(t))if(r.isBuffer(t))for(s=0;o>s;s++)a[s]=t.readUInt8(s);else for(s=0;o>s;s++)a[s]=(t[s]%256+256)%256;else if("string"===i)a.write(t,0,e);else if("number"===i&&!r._useTypedArrays&&!n)for(s=0;o>s;s++)a[s]=0;return a}function i(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var o=e.length;z(0===o%2,"Invalid hex string"),r>o/2&&(r=o/2);for(var a=0;r>a;a++){var s=parseInt(e.substr(2*a,2),16);z(!isNaN(s),"Invalid hex string"),t[n+a]=s}return a}function o(t,e,n,r){var i=P(C(e),t,n,r);return i}function a(t,e,n,r){var i=P(M(e),t,n,r);return i}function s(t,e,n,r){return a(t,e,n,r)}function u(t,e,n,r){var i=P(F(e),t,n,r);return i}function c(t,e,n,r){var i=P(k(e),t,n,r);return i}function f(t,e,n){return 0===e&&n===t.length?W.fromByteArray(t):W.fromByteArray(t.slice(e,n))}function l(t,e,n){var r="",i="";n=Math.min(t.length,n);for(var o=e;n>o;o++)127>=t[o]?(r+=U(i)+String.fromCharCode(t[o]),i=""):i+="%"+t[o].toString(16);return r+U(i)}function h(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;n>i;i++)r+=String.fromCharCode(t[i]);return r}function d(t,e,n){return h(t,e,n)}function p(t,e,n){var r=t.length;(!e||0>e)&&(e=0),(!n||0>n||n>r)&&(n=r);for(var i="",o=e;n>o;o++)i+=B(t[o]);return i}function g(t,e,n){for(var r=t.slice(e,n),i="",o=0;r.length>o;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function m(t,e,n,r){r||(z("boolean"==typeof n,"missing or invalid endian"),z(void 0!==e&&null!==e,"missing offset"),z(t.length>e+1,"Trying to read beyond buffer length"));var i=t.length;if(!(e>=i)){var o;return n?(o=t[e],i>e+1&&(o|=t[e+1]<<8)):(o=t[e]<<8,i>e+1&&(o|=t[e+1])),o}}function v(t,e,n,r){r||(z("boolean"==typeof n,"missing or invalid endian"),z(void 0!==e&&null!==e,"missing offset"),z(t.length>e+3,"Trying to read beyond buffer length"));var i=t.length;if(!(e>=i)){var o;return n?(i>e+2&&(o=t[e+2]<<16),i>e+1&&(o|=t[e+1]<<8),o|=t[e],i>e+3&&(o+=t[e+3]<<24>>>0)):(i>e+1&&(o=t[e+1]<<16),i>e+2&&(o|=t[e+2]<<8),i>e+3&&(o|=t[e+3]),o+=t[e]<<24>>>0),o}}function y(t,e,n,r){r||(z("boolean"==typeof n,"missing or invalid endian"),z(void 0!==e&&null!==e,"missing offset"),z(t.length>e+1,"Trying to read beyond buffer length"));var i=t.length;if(!(e>=i)){var o=m(t,e,n,!0),a=32768&o;return a?-1*(65535-o+1):o}}function b(t,e,n,r){r||(z("boolean"==typeof n,"missing or invalid endian"),z(void 0!==e&&null!==e,"missing offset"),z(t.length>e+3,"Trying to read beyond buffer length"));var i=t.length;if(!(e>=i)){var o=v(t,e,n,!0),a=2147483648&o;return a?-1*(4294967295-o+1):o}}function E(t,e,n,r){return r||(z("boolean"==typeof n,"missing or invalid endian"),z(t.length>e+3,"Trying to read beyond buffer length")),J.read(t,e,n,23,4)}function w(t,e,n,r){return r||(z("boolean"==typeof n,"missing or invalid endian"),z(t.length>e+7,"Trying to read beyond buffer length")),J.read(t,e,n,52,8)}function O(t,e,n,r,i){i||(z(void 0!==e&&null!==e,"missing value"),z("boolean"==typeof r,"missing or invalid endian"),z(void 0!==n&&null!==n,"missing offset"),z(t.length>n+1,"trying to write beyond buffer length"),V(e,65535));var o=t.length;if(!(n>=o)){for(var a=0,s=Math.min(o-n,2);s>a;a++)t[n+a]=(e&255<<8*(r?a:1-a))>>>8*(r?a:1-a);return n+2}}function I(t,e,n,r,i){i||(z(void 0!==e&&null!==e,"missing value"),z("boolean"==typeof r,"missing or invalid endian"),z(void 0!==n&&null!==n,"missing offset"),z(t.length>n+3,"trying to write beyond buffer length"),V(e,4294967295));var o=t.length;if(!(n>=o)){for(var a=0,s=Math.min(o-n,4);s>a;a++)t[n+a]=255&e>>>8*(r?a:3-a);return n+4}}function _(t,e,n,r,i){i||(z(void 0!==e&&null!==e,"missing value"),z("boolean"==typeof r,"missing or invalid endian"),z(void 0!==n&&null!==n,"missing offset"),z(t.length>n+1,"Trying to write beyond buffer length"),Y(e,32767,-32768));var o=t.length;if(!(n>=o))return e>=0?O(t,e,n,r,i):O(t,65535+e+1,n,r,i),n+2}function j(t,e,n,r,i){i||(z(void 0!==e&&null!==e,"missing value"),z("boolean"==typeof r,"missing or invalid endian"),z(void 0!==n&&null!==n,"missing offset"),z(t.length>n+3,"Trying to write beyond buffer length"),Y(e,2147483647,-2147483648));var o=t.length;if(!(n>=o))return e>=0?I(t,e,n,r,i):I(t,4294967295+e+1,n,r,i),n+4}function A(t,e,n,r,i){i||(z(void 0!==e&&null!==e,"missing value"),z("boolean"==typeof r,"missing or invalid endian"),z(void 0!==n&&null!==n,"missing offset"),z(t.length>n+3,"Trying to write beyond buffer length"),X(e,3.4028234663852886e38,-3.4028234663852886e38));var o=t.length;if(!(n>=o))return J.write(t,e,n,r,23,4),n+4}function x(t,e,n,r,i){i||(z(void 0!==e&&null!==e,"missing value"),z("boolean"==typeof r,"missing or invalid endian"),z(void 0!==n&&null!==n,"missing offset"),z(t.length>n+7,"Trying to write beyond buffer length"),X(e,1.7976931348623157e308,-1.7976931348623157e308));var o=t.length;if(!(n>=o))return J.write(t,e,n,r,52,8),n+8}function T(t){for(t=S(t).replace($,"");0!==t.length%4;)t+="=";return t}function S(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function N(t,e,n){return"number"!=typeof t?n:(t=~~t,t>=e?e:t>=0?t:(t+=e,t>=0?t:0))}function D(t){return t=~~Math.ceil(+t),0>t?0:t}function R(t){return(Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)})(t)}function L(t){return R(t)||r.isBuffer(t)||t&&"object"==typeof t&&"number"==typeof t.length}function B(t){return 16>t?"0"+t.toString(16):t.toString(16)}function C(t){for(var e=[],n=0;t.length>n;n++){var r=t.charCodeAt(n);if(127>=r)e.push(r);else{var i=n;r>=55296&&57343>=r&&n++;for(var o=encodeURIComponent(t.slice(i,n+1)).substr(1).split("%"),a=0;o.length>a;a++)e.push(parseInt(o[a],16))}}return e}function M(t){for(var e=[],n=0;t.length>n;n++)e.push(255&t.charCodeAt(n));return e}function k(t){for(var e,n,r,i=[],o=0;t.length>o;o++)e=t.charCodeAt(o),n=e>>8,r=e%256,i.push(r),i.push(n);return i}function F(t){return W.toByteArray(t)}function P(t,e,n,r){for(var i=0;r>i&&!(i+n>=e.length||i>=t.length);i++)e[i+n]=t[i];return i}function U(t){try{return decodeURIComponent(t)}catch(e){return String.fromCharCode(65533)}}function V(t,e){z("number"==typeof t,"cannot write a non-number as a number"),z(t>=0,"specified a negative value for writing an unsigned value"),z(e>=t,"value is larger than maximum value for type"),z(Math.floor(t)===t,"value has a fractional component")}function Y(t,e,n){z("number"==typeof t,"cannot write a non-number as a number"),z(e>=t,"value larger than maximum allowed value"),z(t>=n,"value smaller than minimum allowed value"),z(Math.floor(t)===t,"value has a fractional component")}function X(t,e,n){z("number"==typeof t,"cannot write a non-number as a number"),z(e>=t,"value larger than maximum allowed value"),z(t>=n,"value smaller than minimum allowed value")}function z(t,e){if(!t)throw Error(e||"Failed assertion")}var W=t("base64-js"),J=t("ieee754");n.Buffer=r,n.SlowBuffer=r,n.INSPECT_MAX_BYTES=50,r.poolSize=8192,r._useTypedArrays=function(){try{var t=new ArrayBuffer(0),e=new Uint8Array(t);return e.foo=function(){return 42},42===e.foo()&&"function"==typeof e.subarray}catch(n){return!1}}(),r.isEncoding=function(t){switch((t+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.isBuffer=function(t){return!(null===t||void 0===t||!t._isBuffer)},r.byteLength=function(t,e){var n;switch(t=""+t,e||"utf8"){case"hex":n=t.length/2;break;case"utf8":case"utf-8":n=C(t).length;break;case"ascii":case"binary":case"raw":n=t.length;break;case"base64":n=F(t).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":n=2*t.length;break;default:throw Error("Unknown encoding")}return n},r.concat=function(t,e){if(z(R(t),"Usage: Buffer.concat(list[, length])"),0===t.length)return new r(0);if(1===t.length)return t[0];var n;if(void 0===e)for(e=0,n=0;t.length>n;n++)e+=t[n].length;var i=new r(e),o=0;for(n=0;t.length>n;n++){var a=t[n];a.copy(i,o),o+=a.length}return i},r.compare=function(t,e){z(r.isBuffer(t)&&r.isBuffer(e),"Arguments must be Buffers");for(var n=t.length,i=e.length,o=0,a=Math.min(n,i);a>o&&t[o]===e[o];o++);return o!==a&&(n=t[o],i=e[o]),i>n?-1:n>i?1:0},r.prototype.write=function(t,e,n,r){if(isFinite(e))isFinite(n)||(r=n,n=void 0);else{var f=r;r=e,e=n,n=f}e=Number(e)||0;var l=this.length-e;n?(n=Number(n),n>l&&(n=l)):n=l,r=((r||"utf8")+"").toLowerCase();var h;switch(r){case"hex":h=i(this,t,e,n);break;case"utf8":case"utf-8":h=o(this,t,e,n);break;case"ascii":h=a(this,t,e,n);break;case"binary":h=s(this,t,e,n);break;case"base64":h=u(this,t,e,n);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":h=c(this,t,e,n);break;default:throw Error("Unknown encoding")}return h},r.prototype.toString=function(t,e,n){var r=this;if(t=((t||"utf8")+"").toLowerCase(),e=Number(e)||0,n=void 0===n?r.length:Number(n),n===e)return"";var i;switch(t){case"hex":i=p(r,e,n);break;case"utf8":case"utf-8":i=l(r,e,n);break;case"ascii":i=h(r,e,n);break;case"binary":i=d(r,e,n);break;case"base64":i=f(r,e,n);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":i=g(r,e,n);break;default:throw Error("Unknown encoding")}return i},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},r.prototype.equals=function(t){return z(r.isBuffer(t),"Argument must be a Buffer"),0===r.compare(this,t)},r.prototype.compare=function(t){return z(r.isBuffer(t),"Argument must be a Buffer"),r.compare(this,t)},r.prototype.copy=function(t,e,n,i){var o=this;if(n||(n=0),i||0===i||(i=this.length),e||(e=0),i!==n&&0!==t.length&&0!==o.length){z(i>=n,"sourceEnd < sourceStart"),z(e>=0&&t.length>e,"targetStart out of bounds"),z(n>=0&&o.length>n,"sourceStart out of bounds"),z(i>=0&&o.length>=i,"sourceEnd out of bounds"),i>this.length&&(i=this.length),i-n>t.length-e&&(i=t.length-e+n);var a=i-n;if(100>a||!r._useTypedArrays)for(var s=0;a>s;s++)t[s+e]=this[s+n];else t._set(this.subarray(n,n+a),e)}},r.prototype.slice=function(t,e){var n=this.length;if(t=N(t,n,0),e=N(e,n,n),r._useTypedArrays)return r._augment(this.subarray(t,e));for(var i=e-t,o=new r(i,void 0,!0),a=0;i>a;a++)o[a]=this[a+t];return o},r.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},r.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},r.prototype.readUInt8=function(t,e){return e||(z(void 0!==t&&null!==t,"missing offset"),z(this.length>t,"Trying to read beyond buffer length")),t>=this.length?void 0:this[t]},r.prototype.readUInt16LE=function(t,e){return m(this,t,!0,e)},r.prototype.readUInt16BE=function(t,e){return m(this,t,!1,e)},r.prototype.readUInt32LE=function(t,e){return v(this,t,!0,e)},r.prototype.readUInt32BE=function(t,e){return v(this,t,!1,e)},r.prototype.readInt8=function(t,e){if(e||(z(void 0!==t&&null!==t,"missing offset"),z(this.length>t,"Trying to read beyond buffer length")),!(t>=this.length)){var n=128&this[t];return n?-1*(255-this[t]+1):this[t]}},r.prototype.readInt16LE=function(t,e){return y(this,t,!0,e)},r.prototype.readInt16BE=function(t,e){return y(this,t,!1,e)},r.prototype.readInt32LE=function(t,e){return b(this,t,!0,e)},r.prototype.readInt32BE=function(t,e){return b(this,t,!1,e)},r.prototype.readFloatLE=function(t,e){return E(this,t,!0,e)},r.prototype.readFloatBE=function(t,e){return E(this,t,!1,e)},r.prototype.readDoubleLE=function(t,e){return w(this,t,!0,e)},r.prototype.readDoubleBE=function(t,e){return w(this,t,!1,e)},r.prototype.writeUInt8=function(t,e,n){return n||(z(void 0!==t&&null!==t,"missing value"),z(void 0!==e&&null!==e,"missing offset"),z(this.length>e,"trying to write beyond buffer length"),V(t,255)),e>=this.length?void 0:(this[e]=t,e+1)},r.prototype.writeUInt16LE=function(t,e,n){return O(this,t,e,!0,n)},r.prototype.writeUInt16BE=function(t,e,n){return O(this,t,e,!1,n)},r.prototype.writeUInt32LE=function(t,e,n){return I(this,t,e,!0,n)},r.prototype.writeUInt32BE=function(t,e,n){return I(this,t,e,!1,n)},r.prototype.writeInt8=function(t,e,n){return n||(z(void 0!==t&&null!==t,"missing value"),z(void 0!==e&&null!==e,"missing offset"),z(this.length>e,"Trying to write beyond buffer length"),Y(t,127,-128)),e>=this.length?void 0:(t>=0?this.writeUInt8(t,e,n):this.writeUInt8(255+t+1,e,n),e+1)},r.prototype.writeInt16LE=function(t,e,n){return _(this,t,e,!0,n)},r.prototype.writeInt16BE=function(t,e,n){return _(this,t,e,!1,n)},r.prototype.writeInt32LE=function(t,e,n){return j(this,t,e,!0,n)},r.prototype.writeInt32BE=function(t,e,n){return j(this,t,e,!1,n)},r.prototype.writeFloatLE=function(t,e,n){return A(this,t,e,!0,n)},r.prototype.writeFloatBE=function(t,e,n){return A(this,t,e,!1,n)},r.prototype.writeDoubleLE=function(t,e,n){return x(this,t,e,!0,n)},r.prototype.writeDoubleBE=function(t,e,n){return x(this,t,e,!1,n)},r.prototype.fill=function(t,e,n){if(t||(t=0),e||(e=0),n||(n=this.length),z(n>=e,"end < start"),n!==e&&0!==this.length){z(e>=0&&this.length>e,"start out of bounds"),z(n>=0&&this.length>=n,"end out of bounds");var r;if("number"==typeof t)for(r=e;n>r;r++)this[r]=t;else{var i=C(""+t),o=i.length;for(r=e;n>r;r++)this[r]=i[r%o]}return this}},r.prototype.inspect=function(){for(var t=[],e=this.length,r=0;e>r;r++)if(t[r]=B(this[r]),r===n.INSPECT_MAX_BYTES){t[r+1]="...";break}return"<Buffer "+t.join(" ")+">"},r.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(r._useTypedArrays)return new r(this).buffer;for(var t=new Uint8Array(this.length),e=0,n=t.length;n>e;e+=1)t[e]=this[e];return t.buffer}throw Error("Buffer.toArrayBuffer not supported in this browser")};var q=r.prototype;r._augment=function(t){return t._isBuffer=!0,t._get=t.get,t._set=t.set,t.get=q.get,t.set=q.set,t.write=q.write,t.toString=q.toString,t.toLocaleString=q.toString,t.toJSON=q.toJSON,t.equals=q.equals,t.compare=q.compare,t.copy=q.copy,t.slice=q.slice,t.readUInt8=q.readUInt8,t.readUInt16LE=q.readUInt16LE,t.readUInt16BE=q.readUInt16BE,t.readUInt32LE=q.readUInt32LE,t.readUInt32BE=q.readUInt32BE,t.readInt8=q.readInt8,t.readInt16LE=q.readInt16LE,t.readInt16BE=q.readInt16BE,t.readInt32LE=q.readInt32LE,t.readInt32BE=q.readInt32BE,t.readFloatLE=q.readFloatLE,t.readFloatBE=q.readFloatBE,t.readDoubleLE=q.readDoubleLE,t.readDoubleBE=q.readDoubleBE,t.writeUInt8=q.writeUInt8,t.writeUInt16LE=q.writeUInt16LE,t.writeUInt16BE=q.writeUInt16BE,t.writeUInt32LE=q.writeUInt32LE,t.writeUInt32BE=q.writeUInt32BE,t.writeInt8=q.writeInt8,t.writeInt16LE=q.writeInt16LE,t.writeInt16BE=q.writeInt16BE,t.writeInt32LE=q.writeInt32LE,t.writeInt32BE=q.writeInt32BE,t.writeFloatLE=q.writeFloatLE,t.writeFloatBE=q.writeFloatBE,t.writeDoubleLE=q.writeDoubleLE,t.writeDoubleBE=q.writeDoubleBE,t.fill=q.fill,t.inspect=q.inspect,t.toArrayBuffer=q.toArrayBuffer,t};var $=/[^+\/0-9A-z]/g},{"base64-js":7,ieee754:8}],7:[function(t,e,n){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";(function(t){"use strict";function e(t){var e=t.charCodeAt(0);return e===a?62:e===s?63:u>e?-1:u+10>e?e-u+26+26:f+26>e?e-f:c+26>e?e-c+26:void 0}function n(t){function n(t){c[l++]=t}var r,i,a,s,u,c;if(t.length%4>0)throw Error("Invalid string. Length must be a multiple of 4");var f=t.length;u="="===t.charAt(f-2)?2:"="===t.charAt(f-1)?1:0,c=new o(3*t.length/4-u),a=u>0?t.length-4:t.length;var l=0;for(r=0,i=0;a>r;r+=4,i+=3)s=e(t.charAt(r))<<18|e(t.charAt(r+1))<<12|e(t.charAt(r+2))<<6|e(t.charAt(r+3)),n((16711680&s)>>16),n((65280&s)>>8),n(255&s);return 2===u?(s=e(t.charAt(r))<<2|e(t.charAt(r+1))>>4,n(255&s)):1===u&&(s=e(t.charAt(r))<<10|e(t.charAt(r+1))<<4|e(t.charAt(r+2))>>2,n(255&s>>8),n(255&s)),c}function i(t){function e(t){return r.charAt(t)}function n(t){return e(63&t>>18)+e(63&t>>12)+e(63&t>>6)+e(63&t)}var i,o,a,s=t.length%3,u="";for(i=0,a=t.length-s;a>i;i+=3)o=(t[i]<<16)+(t[i+1]<<8)+t[i+2],u+=n(o);switch(s){case 1:o=t[t.length-1],u+=e(o>>2),u+=e(63&o<<4),u+="==";break;case 2:o=(t[t.length-2]<<8)+t[t.length-1],u+=e(o>>10),u+=e(63&o>>4),u+=e(63&o<<2),u+="="}return u}var o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="+".charCodeAt(0),s="/".charCodeAt(0),u="0".charCodeAt(0),c="a".charCodeAt(0),f="A".charCodeAt(0);t.toByteArray=n,t.fromByteArray=i})(n===void 0?this.base64js={}:n)},{}],8:[function(t,e,n){n.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,f=-7,l=n?i-1:0,h=n?-1:1,d=t[e+l];for(l+=h,o=d&(1<<-f)-1,d>>=-f,f+=s;f>0;o=256*o+t[e+l],l+=h,f-=8);for(a=o&(1<<-f)-1,o>>=-f,f+=r;f>0;a=256*a+t[e+l],l+=h,f-=8);if(0===o)o=1-c;else{if(o===u)return a?0/0:1/0*(d?-1:1);a+=Math.pow(2,r),o-=c}return(d?-1:1)*a*Math.pow(2,o-r)},n.write=function(t,e,n,r,i,o){var a,s,u,c=8*o-i-1,f=(1<<c)-1,l=f>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,g=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||1/0===e?(s=isNaN(e)?1:0,a=f):(a=Math.floor(Math.log(e)/Math.LN2),1>e*(u=Math.pow(2,-a))&&(a--,u*=2),e+=a+l>=1?h/u:h*Math.pow(2,1-l),e*u>=2&&(a++,u/=2),a+l>=f?(s=0,a=f):a+l>=1?(s=(e*u-1)*Math.pow(2,i),a+=l):(s=e*Math.pow(2,l-1)*Math.pow(2,i),a=0));i>=8;t[n+d]=255&s,d+=p,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;t[n+d]=255&a,d+=p,a/=256,c-=8);t[n+d-p]|=128*g}},{}],9:[function(t,e,n){(function(t){function e(t,e){for(var n=0,r=t.length-1;r>=0;r--){var i=t[r];"."===i?t.splice(r,1):".."===i?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function r(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;t.length>r;r++)e(t[r],r,t)&&n.push(t[r]);return n}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(t){return i.exec(t).slice(1)};n.resolve=function(){for(var n="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var a=o>=0?arguments[o]:t.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(n=a+"/"+n,i="/"===a.charAt(0))}return n=e(r(n.split("/"),function(t){return!!t}),!i).join("/"),(i?"/":"")+n||"."},n.normalize=function(t){var i=n.isAbsolute(t),o="/"===a(t,-1);return t=e(r(t.split("/"),function(t){return!!t}),!i).join("/"),t||i||(t="."),t&&o&&(t+="/"),(i?"/":"")+t},n.isAbsolute=function(t){return"/"===t.charAt(0)},n.join=function(){var t=Array.prototype.slice.call(arguments,0);return n.normalize(r(t,function(t){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},n.relative=function(t,e){function r(t){for(var e=0;t.length>e&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=n.resolve(t).substr(1),e=n.resolve(e).substr(1);for(var i=r(t.split("/")),o=r(e.split("/")),a=Math.min(i.length,o.length),s=a,u=0;a>u;u++)if(i[u]!==o[u]){s=u;break}for(var c=[],u=s;i.length>u;u++)c.push("..");return c=c.concat(o.slice(s)),c.join("/")},n.sep="/",n.delimiter=":",n.dirname=function(t){var e=o(t),n=e[0],r=e[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},n.basename=function(t,e){var n=o(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},n.extname=function(t){return o(t)[3]};var a="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return 0>e&&(e=t.length+e),t.substr(e,n)}}).call(this,t("JkpR2F"))},{JkpR2F:10}],10:[function(t,e){function n(){}var r=e.exports={};r.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var n=[];return window.addEventListener("message",function(t){var e=t.source;if((e===window||null===e)&&"process-tick"===t.data&&(t.stopPropagation(),n.length>0)){var r=n.shift();r()}},!0),function(t){n.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),r.title="browser",r.browser=!0,r.env={},r.argv=[],r.on=n,r.addListener=n,r.once=n,r.off=n,r.removeListener=n,r.removeAllListeners=n,r.emit=n,r.binding=function(){throw Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(){throw Error("process.chdir is not supported")}},{}],11:[function(t,e){(function(n){(function(t,e,n,r){function i(t){return t.split("").reduce(function(t,e){return t[e]=!0,t},{})}function o(t,e){return e=e||{},function(n){return s(n,t,e)}}function a(t,e){t=t||{},e=e||{};var n={};return Object.keys(e).forEach(function(t){n[t]=e[t]}),Object.keys(t).forEach(function(e){n[e]=t[e]}),n}function s(t,e,n){if("string"!=typeof e)throw new TypeError("glob pattern string required");return n||(n={}),n.nocomment||"#"!==e.charAt(0)?""===e.trim()?""===t:new u(e,n).match(t):!1}function u(t,e){if(!(this instanceof u))return new u(t,e,b);if("string"!=typeof t)throw new TypeError("glob pattern string required");e||(e={}),t=t.trim(),"win32"===r&&(t=t.split("\\").join("/"));var n=t+"\n"+w(e),i=s.cache.get(n);return i?i:(s.cache.set(n,this),this.options=e,this.set=[],this.pattern=t,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.make(),void 0)}function c(){if(!this._made){var t=this.pattern,e=this.options;if(!e.nocomment&&"#"===t.charAt(0))return this.comment=!0,void 0;if(!t)return this.empty=!0,void 0;this.parseNegate();var n=this.globSet=this.braceExpand();e.debug&&(this.debug=console.error),this.debug(this.pattern,n),n=this.globParts=n.map(function(t){return t.split(x)}),this.debug(this.pattern,n),n=n.map(function(t){return t.map(this.parse,this)},this),this.debug(this.pattern,n),n=n.filter(function(t){return-1===t.indexOf(!1)}),this.debug(this.pattern,n),this.set=n}}function f(){var t=this.pattern,e=!1,n=this.options,r=0;if(!n.nonegate){for(var i=0,o=t.length;o>i&&"!"===t.charAt(i);i++)e=!e,r++;r&&(this.pattern=t.substr(r)),this.negate=e}}function l(t,e,n){return n=n||"0",t+="",t.length>=e?t:Array(e-t.length+1).join(n)+t}function h(t,e){function n(){b.push(I),I=""}if(e=e||this.options,t=t===void 0?this.pattern:t,t===void 0)throw Error("undefined pattern");if(e.nobrace||!t.match(/\{.*\}/))return[t];var r=!1;if("{"!==t.charAt(0)){this.debug(t);for(var i=null,o=0,a=t.length;a>o;o++){var s=t.charAt(o);if(this.debug(o,s),"\\"===s)r=!r;else if("{"===s&&!r){i=t.substr(0,o);break}}if(null===i)return this.debug("no sets"),[t];var u=h.call(this,t.substr(o),e);return u.map(function(t){return i+t})}var c=t.match(/^\{(-?[0-9]+)\.\.(-?[0-9]+)\}/);if(c){this.debug("numset",c[1],c[2]);for(var f,d=h.call(this,t.substr(c[0].length),e),p=+c[1],g="0"===c[1][0],m=c[1].length,v=+c[2],y=p>v?-1:1,b=[],o=p;o!=v+y;o+=y){f=g?l(o,m):o+"";for(var E=0,w=d.length;w>E;E++)b.push(f+d[E])}return b}var o=1,O=1,b=[],I="",r=!1;this.debug("Entering for");t:for(o=1,a=t.length;a>o;o++){var s=t.charAt(o);if(this.debug("",o,s),r)r=!1,I+="\\"+s;else switch(s){case"\\":r=!0;continue;case"{":O++,I+="{";continue;case"}":if(O--,0===O){n(),o++;break t}I+=s;continue;case",":1===O?n():I+=s;continue;default:I+=s;continue}}if(0!==O)return this.debug("didn't close",t),h.call(this,"\\"+t,e);this.debug("set",b),this.debug("suffix",t.substr(o));var d=h.call(this,t.substr(o),e),_=1===b.length;this.debug("set pre-expanded",b),b=b.map(function(t){return h.call(this,t,e)},this),this.debug("set expanded",b),b=b.reduce(function(t,e){return t.concat(e)}),_&&(b=b.map(function(t){return"{"+t+"}"}));for(var j=[],o=0,a=b.length;a>o;o++)for(var E=0,w=d.length;w>E;E++)j.push(b[o]+d[E]);return j}function d(t,e){function n(){if(o){switch(o){case"*":s+=I,u=!0;break;case"?":s+=O,u=!0;break;default:s+="\\"+o}g.debug("clearStateChar %j %j",o,s),o=!1}}var r=this.options;if(!r.noglobstar&&"**"===t)return E;if(""===t)return"";for(var i,o,a,s="",u=!!r.nocase,c=!1,f=[],l=!1,h=-1,d=-1,p="."===t.charAt(0)?"":r.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",g=this,v=0,y=t.length;y>v&&(a=t.charAt(v));v++)if(this.debug("%s	%s %s %j",t,v,s,a),c&&A[a])s+="\\"+a,c=!1;
else switch(a){case"/":return!1;case"\\":n(),c=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",t,v,s,a),l){this.debug("  in class"),"!"===a&&v===d+1&&(a="^"),s+=a;continue}g.debug("call clearStateChar %j",o),n(),o=a,r.noext&&n();continue;case"(":if(l){s+="(";continue}if(!o){s+="\\(";continue}i=o,f.push({type:i,start:v-1,reStart:s.length}),s+="!"===o?"(?:(?!":"(?:",this.debug("plType %j %j",o,s),o=!1;continue;case")":if(l||!f.length){s+="\\)";continue}switch(n(),u=!0,s+=")",i=f.pop().type){case"!":s+="[^/]*?)";break;case"?":case"+":case"*":s+=i;case"@":}continue;case"|":if(l||!f.length||c){s+="\\|",c=!1;continue}n(),s+="|";continue;case"[":if(n(),l){s+="\\"+a;continue}l=!0,d=v,h=s.length,s+=a;continue;case"]":if(v===d+1||!l){s+="\\"+a,c=!1;continue}u=!0,l=!1,s+=a;continue;default:n(),c?c=!1:!A[a]||"^"===a&&l||(s+="\\"),s+=a}if(l){var b=t.substr(d+1),w=this.parse(b,T);s=s.substr(0,h)+"\\["+w[0],u=u||w[1]}for(var _;_=f.pop();){var j=s.slice(_.reStart+3);j=j.replace(/((?:\\{2})*)(\\?)\|/g,function(t,e,n){return n||(n="\\"),e+e+n+"|"}),this.debug("tail=%j\n   %s",j,j);var x="*"===_.type?I:"?"===_.type?O:"\\"+_.type;u=!0,s=s.slice(0,_.reStart)+x+"\\("+j}n(),c&&(s+="\\\\");var S=!1;switch(s.charAt(0)){case".":case"[":case"(":S=!0}if(""!==s&&u&&(s="(?=.)"+s),S&&(s=p+s),e===T)return[s,u];if(!u)return m(t);var N=r.nocase?"i":"",D=RegExp("^"+s+"$",N);return D._glob=t,D._src=s,D}function p(){if(this.regexp||this.regexp===!1)return this.regexp;var t=this.set;if(!t.length)return this.regexp=!1;var e=this.options,n=e.noglobstar?I:e.dot?_:j,r=e.nocase?"i":"",i=t.map(function(t){return t.map(function(t){return t===E?n:"string"==typeof t?v(t):t._src}).join("\\/")}).join("|");i="^(?:"+i+")$",this.negate&&(i="^(?!"+i+").*$");try{return this.regexp=RegExp(i,r)}catch(o){return this.regexp=!1}}function g(t,e){if(this.debug("match",t,this.pattern),this.comment)return!1;if(this.empty)return""===t;if("/"===t&&e)return!0;var n=this.options;"win32"===r&&(t=t.split("\\").join("/")),t=t.split(x),this.debug(this.pattern,"split",t);var i=this.set;this.debug(this.pattern,"set",i);for(var o,a=t.length-1;a>=0&&!(o=t[a]);a--);for(var a=0,s=i.length;s>a;a++){var u=i[a],c=t;n.matchBase&&1===u.length&&(c=[o]);var f=this.matchOne(c,u,e);if(f)return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}function m(t){return t.replace(/\\(.)/g,"$1")}function v(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}n?n.exports=s:e.minimatch=s,t||(t=function(t){switch(t){case"sigmund":return function(t){return JSON.stringify(t)};case"path":return{basename:function(t){t=t.split(/[\/\\]/);var e=t.pop();return e||(e=t.pop()),e}};case"lru-cache":return function(){var t={},e=0;this.set=function(n,r){e++,e>=100&&(t={}),t[n]=r},this.get=function(e){return t[e]}}}}),s.Minimatch=u;var y=t("lru-cache"),b=s.cache=new y({max:100}),E=s.GLOBSTAR=u.GLOBSTAR={},w=t("sigmund"),O=(t("path"),"[^/]"),I=O+"*?",_="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",j="(?:(?!(?:\\/|^)\\.).)*?",A=i("().*{}+?[]^$\\!"),x=/\/+/;s.filter=o,s.defaults=function(t){if(!t||!Object.keys(t).length)return r;var e=r,n=function r(n,r,i){return e.minimatch(n,r,a(t,i))};return n.Minimatch=function(n,r){return new e.Minimatch(n,a(t,r))},n},u.defaults=function(t){return t&&Object.keys(t).length?s.defaults(t).Minimatch:u},u.prototype.debug=function(){},u.prototype.make=c,u.prototype.parseNegate=f,s.braceExpand=function(t,e){return new u(t,e).braceExpand()},u.prototype.braceExpand=h,u.prototype.parse=d;var T={};s.makeRe=function(t,e){return new u(t,e||{}).makeRe()},u.prototype.makeRe=p,s.match=function(t,e,n){n=n||{};var r=new u(e,n);return t=t.filter(function(t){return r.match(t)}),r.options.nonull&&!t.length&&t.push(e),t},u.prototype.match=g,u.prototype.matchOne=function(t,e,n){var r=this.options;this.debug("matchOne",{"this":this,file:t,pattern:e}),this.debug("matchOne",t.length,e.length);for(var i=0,o=0,a=t.length,s=e.length;a>i&&s>o;i++,o++){this.debug("matchOne loop");var u=e[o],c=t[i];if(this.debug(e,u,c),u===!1)return!1;if(u===E){this.debug("GLOBSTAR",[e,u,c]);var f=i,l=o+1;if(l===s){for(this.debug("** at the end");a>i;i++)if("."===t[i]||".."===t[i]||!r.dot&&"."===t[i].charAt(0))return!1;return!0}t:for(;a>f;){var h=t[f];if(this.debug("\nglobstar while",t,f,e,l,h),this.matchOne(t.slice(f),e.slice(l),n))return this.debug("globstar found match!",f,a,h),!0;if("."===h||".."===h||!r.dot&&"."===h.charAt(0)){this.debug("dot detected!",t,f,e,l);break t}this.debug("globstar swallow a segment, and continue"),f++}return n&&(this.debug("\n>>> no match, partial?",t,f,e,l),f===a)?!0:!1}var d;if("string"==typeof u?(d=r.nocase?c.toLowerCase()===u.toLowerCase():c===u,this.debug("string match",u,c,d)):(d=c.match(u),this.debug("pattern match",u,c,d)),!d)return!1}if(i===a&&o===s)return!0;if(i===a)return n;if(o===s){var p=i===a-1&&""===t[i];return p}throw Error("wtf?")}})("function"==typeof t?t:null,this,"object"==typeof e?e:null,"object"==typeof n?n.platform:"win32")}).call(this,t("JkpR2F"))},{JkpR2F:10,"lru-cache":12,path:9,sigmund:13}],12:[function(t,e){(function(){function t(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function n(){return 1}function r(t){return this instanceof r?("number"==typeof t&&(t={max:t}),t||(t={}),this._max=t.max,(!this._max||"number"!=typeof this._max||0>=this._max)&&(this._max=1/0),this._lengthCalculator=t.length||n,"function"!=typeof this._lengthCalculator&&(this._lengthCalculator=n),this._allowStale=t.stale||!1,this._maxAge=t.maxAge||null,this._dispose=t.dispose,this.reset(),void 0):new r(t)}function i(t,e,n){var r=t._cache[e];return r&&(t._maxAge&&Date.now()-r.now>t._maxAge?(u(t,r),t._allowStale||(r=void 0)):n&&o(t,r),r&&(r=r.value)),r}function o(t,e){s(t,e),e.lu=t._mru++,t._lruList[e.lu]=e}function a(t){for(;t._lru<t._mru&&t._length>t._max;)u(t,t._lruList[t._lru])}function s(t,e){for(delete t._lruList[e.lu];t._lru<t._mru&&!t._lruList[t._lru];)t._lru++}function u(t,e){e&&(t._dispose&&t._dispose(e.key,e.value),t._length-=e.length,t._itemCount--,delete t._cache[e.key],s(t,e))}function c(t,e,n,r,i){this.key=t,this.value=e,this.lu=n,this.length=r,this.now=i}"object"==typeof e&&e.exports?e.exports=r:this.LRUCache=r,Object.defineProperty(r.prototype,"max",{set:function(t){(!t||"number"!=typeof t||0>=t)&&(t=1/0),this._max=t,this._length>this._max&&a(this)},get:function(){return this._max},enumerable:!0}),Object.defineProperty(r.prototype,"lengthCalculator",{set:function(t){if("function"!=typeof t){this._lengthCalculator=n,this._length=this._itemCount;for(var e in this._cache)this._cache[e].length=1}else{this._lengthCalculator=t,this._length=0;for(var e in this._cache)this._cache[e].length=this._lengthCalculator(this._cache[e].value),this._length+=this._cache[e].length}this._length>this._max&&a(this)},get:function(){return this._lengthCalculator},enumerable:!0}),Object.defineProperty(r.prototype,"length",{get:function(){return this._length},enumerable:!0}),Object.defineProperty(r.prototype,"itemCount",{get:function(){return this._itemCount},enumerable:!0}),r.prototype.forEach=function(t,e){e=e||this;for(var n=0,r=this._mru-1;r>=0&&this._itemCount>n;r--)if(this._lruList[r]){n++;var i=this._lruList[r];this._maxAge&&Date.now()-i.now>this._maxAge&&(u(this,i),this._allowStale||(i=void 0)),i&&t.call(e,i.value,i.key,this)}},r.prototype.keys=function(){for(var t=Array(this._itemCount),e=0,n=this._mru-1;n>=0&&this._itemCount>e;n--)if(this._lruList[n]){var r=this._lruList[n];t[e++]=r.key}return t},r.prototype.values=function(){for(var t=Array(this._itemCount),e=0,n=this._mru-1;n>=0&&this._itemCount>e;n--)if(this._lruList[n]){var r=this._lruList[n];t[e++]=r.value}return t},r.prototype.reset=function(){if(this._dispose&&this._cache)for(var t in this._cache)this._dispose(t,this._cache[t].value);this._cache=Object.create(null),this._lruList=Object.create(null),this._mru=0,this._lru=0,this._length=0,this._itemCount=0},r.prototype.dump=function(){return this._cache},r.prototype.dumpLru=function(){return this._lruList},r.prototype.set=function(e,n){if(t(this._cache,e))return this._dispose&&this._dispose(e,this._cache[e].value),this._maxAge&&(this._cache[e].now=Date.now()),this._cache[e].value=n,this.get(e),!0;var r=this._lengthCalculator(n),i=this._maxAge?Date.now():0,o=new c(e,n,this._mru++,r,i);return o.length>this._max?(this._dispose&&this._dispose(e,n),!1):(this._length+=o.length,this._lruList[o.lu]=this._cache[e]=o,this._itemCount++,this._length>this._max&&a(this),!0)},r.prototype.has=function(e){if(!t(this._cache,e))return!1;var n=this._cache[e];return this._maxAge&&Date.now()-n.now>this._maxAge?!1:!0},r.prototype.get=function(t){return i(this,t,!0)},r.prototype.peek=function(t){return i(this,t,!1)},r.prototype.pop=function(){var t=this._lruList[this._lru];return u(this,t),t||null},r.prototype.del=function(t){u(this,this._cache[t])}})()},{}],13:[function(t,e){function n(t,e){function n(t,a){return a>e||"function"==typeof t||void 0===t?void 0:"object"!=typeof t||!t||t instanceof o?(i+=t,void 0):(-1===r.indexOf(t)&&a!==e&&(r.push(t),i+="{",Object.keys(t).forEach(function(e){if("_"!==e.charAt(0)){var r=typeof t[e];"function"!==r&&"undefined"!==r&&(i+=e,n(t[e],a+1))}})),void 0)}e=e||10;var r=[],i="",o=RegExp;return n(t,0),i}e.exports=n},{}],14:[function(t,e){(function(t){function n(e,n,r){return e instanceof ArrayBuffer&&(e=new Uint8Array(e)),new t(e,n,r)}n.prototype=Object.create(t.prototype),n.prototype.constructor=n,Object.keys(t).forEach(function(e){t.hasOwnProperty(e)&&(n[e]=t[e])}),e.exports=n}).call(this,t("buffer").Buffer)},{buffer:6}],15:[function(t,e){var n="READ",r="WRITE",i="CREATE",o="EXCLUSIVE",a="TRUNCATE",s="APPEND",u="CREATE",c="REPLACE";e.exports={FILE_SYSTEM_NAME:"local",FILE_STORE_NAME:"files",IDB_RO:"readonly",IDB_RW:"readwrite",WSQL_VERSION:"1",WSQL_SIZE:5242880,WSQL_DESC:"FileSystem Storage",MODE_FILE:"FILE",MODE_DIRECTORY:"DIRECTORY",MODE_SYMBOLIC_LINK:"SYMLINK",MODE_META:"META",SYMLOOP_MAX:10,BINARY_MIME_TYPE:"application/octet-stream",JSON_MIME_TYPE:"application/json",ROOT_DIRECTORY_NAME:"/",FS_FORMAT:"FORMAT",FS_NOCTIME:"NOCTIME",FS_NOMTIME:"NOMTIME",FS_NODUPEIDCHECK:"FS_NODUPEIDCHECK",O_READ:n,O_WRITE:r,O_CREATE:i,O_EXCLUSIVE:o,O_TRUNCATE:a,O_APPEND:s,O_FLAGS:{r:[n],"r+":[n,r],w:[r,i,a],"w+":[r,n,i,a],wx:[r,i,o,a],"wx+":[r,n,i,o,a],a:[r,i,s],"a+":[r,n,i,s],ax:[r,i,o,s],"ax+":[r,n,i,o,s]},XATTR_CREATE:u,XATTR_REPLACE:c,FS_READY:"READY",FS_PENDING:"PENDING",FS_ERROR:"ERROR",SUPER_NODE_ID:"00000000-0000-0000-0000-000000000000",STDIN:0,STDOUT:1,STDERR:2,FIRST_DESCRIPTOR:3,ENVIRONMENT:{TMP:"/tmp",PATH:""}}},{}],16:[function(t,e){var n=t("./constants.js").MODE_FILE;e.exports=function(t,e){this.id=t,this.type=e||n}},{"./constants.js":15}],17:[function(t,e){(function(t){function n(t){return t.toString("utf8")}function r(e){return new t(e,"utf8")}e.exports={encode:r,decode:n}}).call(this,t("buffer").Buffer)},{buffer:6}],18:[function(t,e){var n={};["9:EBADF:bad file descriptor","10:EBUSY:resource busy or locked","18:EINVAL:invalid argument","27:ENOTDIR:not a directory","28:EISDIR:illegal operation on a directory","34:ENOENT:no such file or directory","47:EEXIST:file already exists","50:EPERM:operation not permitted","51:ELOOP:too many symbolic links encountered","53:ENOTEMPTY:directory not empty","55:EIO:i/o error","1000:ENOTMOUNTED:not mounted","1001:EFILESYSTEMERROR:missing super node, use 'FORMAT' flag to format filesystem.","1002:ENOATTR:attribute does not exist"].forEach(function(t){function e(t,e){Error.call(this),this.name=i,this.code=i,this.errno=r,this.message=t||o,e&&(this.path=e),this.stack=Error(this.message).stack}t=t.split(":");var r=+t[0],i=t[1],o=t[2];e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e.prototype.toString=function(){var t=this.path?", '"+this.path+"'":"";return this.name+": "+this.message+t},n[i]=n[r]=e}),e.exports=n},{}],19:[function(t,e){function n(t,e,n,r,i){function o(n){t.changes.push({event:"change",path:e}),i(n)}var a=t.flags;le(a).contains(Ce)&&delete r.ctime,le(a).contains(Be)&&delete r.mtime;var s=!1;r.ctime&&(n.ctime=r.ctime,n.atime=r.ctime,s=!0),r.atime&&(n.atime=r.atime,s=!0),r.mtime&&(n.mtime=r.mtime,s=!0),s?t.putObject(n.id,n,o):o()}function r(t,e,r,o){function a(n,r){n?o(n):r.mode!==Ee?o(new ke.ENOTDIR("a component of the path prefix is not a directory",e)):(l=r,i(t,e,s))}function s(n,r){!n&&r?o(new ke.EEXIST("path name already exists",e)):!n||n instanceof ke.ENOENT?t.getObject(l.data,u):o(n)}function u(e,n){e?o(e):(h=n,Ve.create({guid:t.guid,mode:r},function(e,n){return e?(o(e),void 0):(d=n,d.nlinks+=1,t.putObject(d.id,d,f),void 0)}))}function c(e){if(e)o(e);else{var r=Date.now();n(t,g,d,{mtime:r,ctime:r},o)}}function f(e){e?o(e):(h[p]=new Fe(d.id,r),t.putObject(l.data,h,c))}if(r!==Ee&&r!==be)return o(new ke.EINVAL("mode must be a directory or file",e));e=de(e);var l,h,d,p=ge(e),g=pe(e);i(t,g,a)}function i(t,e,n){function r(e,r){e?n(e):r&&r.mode===Oe&&r.rnode?t.getObject(r.rnode,o):n(new ke.EFILESYSTEMERROR)}function o(t,e){t?n(t):e?n(null,e):n(new ke.ENOENT)}function a(r,i){r?n(r):i.mode===Ee&&i.data?t.getObject(i.data,s):n(new ke.ENOTDIR("a component of the path prefix is not a directory",e))}function s(r,i){if(r)n(r);else if(le(i).has(f)){var o=i[f].id;t.getObject(o,u)}else n(new ke.ENOENT(null,e))}function u(t,r){t?n(t):r.mode==we?(h++,h>je?n(new ke.ELOOP(null,e)):c(r.data)):n(null,r)}function c(e){e=de(e),l=pe(e),f=ge(e),Ie==f?t.getObject(_e,r):i(t,l,a)}if(e=de(e),!e)return n(new ke.ENOENT("path is an empty string"));var f=ge(e),l=pe(e),h=0;Ie==f?t.getObject(_e,r):i(t,l,a)}function o(t,e,r,i,o,a,s){function u(i){i?s(i):n(t,e,r,{ctime:Date.now()},s)}var c=r.xattrs;a===Re&&c.hasOwnProperty(i)?s(new ke.EEXIST("attribute already exists",e)):a!==Le||c.hasOwnProperty(i)?(c[i]=o,t.putObject(r.id,r,u)):s(new ke.ENOATTR(null,e))}function a(t,e){function n(n,i){!n&&i?e():!n||n instanceof ke.ENOENT?Ue.create({guid:t.guid},function(n,i){return n?(e(n),void 0):(o=i,t.putObject(o.id,o,r),void 0)}):e(n)}function r(n){n?e(n):Ve.create({guid:t.guid,id:o.rnode,mode:Ee},function(n,r){return n?(e(n),void 0):(a=r,a.nlinks+=1,t.putObject(a.id,a,i),void 0)})}function i(n){n?e(n):(s={},t.putObject(a.data,s,e))}var o,a,s;t.getObject(_e,n)}function s(t,e,r){function o(n,o){!n&&o?r(new ke.EEXIST(null,e)):!n||n instanceof ke.ENOENT?i(t,m,a):r(n)}function a(e,n){e?r(e):(d=n,t.getObject(d.data,s))}function s(e,n){e?r(e):(p=n,Ve.create({guid:t.guid,mode:Ee},function(e,n){return e?(r(e),void 0):(l=n,l.nlinks+=1,t.putObject(l.id,l,u),void 0)}))}function u(e){e?r(e):(h={},t.putObject(l.data,h,f))}function c(e){if(e)r(e);else{var i=Date.now();n(t,m,d,{mtime:i,ctime:i},r)}}function f(e){e?r(e):(p[g]=new Fe(l.id,Ee),t.putObject(d.data,p,c))}e=de(e);var l,h,d,p,g=ge(e),m=pe(e);i(t,e,o)}function u(t,e,r){function o(e,n){e?r(e):(g=n,t.getObject(g.data,a))}function a(n,i){n?r(n):Ie==v?r(new ke.EBUSY(null,e)):le(i).has(v)?(m=i,d=m[v].id,t.getObject(d,s)):r(new ke.ENOENT(null,e))}function s(n,i){n?r(n):i.mode!=Ee?r(new ke.ENOTDIR(null,e)):(d=i,t.getObject(d.data,u))}function u(t,n){t?r(t):(p=n,le(p).size()>0?r(new ke.ENOTEMPTY(null,e)):f())}function c(e){if(e)r(e);else{var i=Date.now();n(t,y,g,{mtime:i,ctime:i},l)}}function f(){delete m[v],t.putObject(g.data,m,c)}function l(e){e?r(e):t.delete(d.id,h)}function h(e){e?r(e):t.delete(d.data,r)}e=de(e);var d,p,g,m,v=ge(e),y=pe(e);i(t,y,o)}function c(t,e,r,o){function a(n,r){n?o(n):r.mode!==Ee?o(new ke.ENOENT(null,e)):(m=r,t.getObject(m.data,s))}function s(n,i){n?o(n):(v=i,le(v).has(w)?le(r).contains(Se)?o(new ke.ENOENT("O_CREATE and O_EXCLUSIVE are set, and the named file exists",e)):(y=v[w],y.type==Ee&&le(r).contains(xe)?o(new ke.EISDIR("the named file is a directory and O_WRITE is set",e)):t.getObject(y.id,u)):le(r).contains(Te)?l():o(new ke.ENOENT("O_CREATE is not set and the named file does not exist",e)))}function u(t,n){if(t)o(t);else{var r=n;r.mode==we?(I++,I>je?o(new ke.ELOOP(null,e)):c(r.data)):f(void 0,r)}}function c(n){n=de(n),O=pe(n),w=ge(n),Ie==w&&(le(r).contains(xe)?o(new ke.EISDIR("the named file is a directory and O_WRITE is set",e)):i(t,e,f)),i(t,O,a)}function f(t,e){t?o(t):(b=e,o(null,b))}function l(){Ve.create({guid:t.guid,mode:be},function(e,n){return e?(o(e),void 0):(b=n,b.nlinks+=1,t.putObject(b.id,b,h),void 0)})}function h(e){e?o(e):(E=new Xe(0),E.fill(0),t.putBuffer(b.data,E,p))}function d(e){if(e)o(e);else{var r=Date.now();n(t,O,m,{mtime:r,ctime:r},g)}}function p(e){e?o(e):(v[w]=new Fe(b.id,be),t.putObject(m.data,v,d))}function g(t){t?o(t):o(null,b)}e=de(e);var m,v,y,b,E,w=ge(e),O=pe(e),I=0;Ie==w?le(r).contains(xe)?o(new ke.EISDIR("the named file is a directory and O_WRITE is set",e)):i(t,e,f):i(t,O,a)}function f(t,e,r,i,o,a){function s(t){t?a(t):a(null,o)}function u(r){if(r)a(r);else{var i=Date.now();n(t,e.path,l,{mtime:i,ctime:i},s)}}function c(e){e?a(e):t.putObject(l.id,l,u)}function f(n,s){if(n)a(n);else{l=s;var u=new Xe(o);u.fill(0),r.copy(u,0,i,i+o),e.position=o,l.size=o,l.version+=1,t.putBuffer(l.data,u,c)}}var l;t.getObject(e.id,f)}function l(t,e,r,i,o,a,s){function u(t){t?s(t):s(null,o)}function c(r){if(r)s(r);else{var i=Date.now();n(t,e.path,d,{mtime:i,ctime:i},u)}}function f(e){e?s(e):t.putObject(d.id,d,c)}function l(n,u){if(n)s(n);else{if(p=u,!p)return s(new ke.EIO("Expected Buffer"));var c=void 0!==a&&null!==a?a:e.position,l=Math.max(p.length,c+o),h=new Xe(l);h.fill(0),p&&p.copy(h),r.copy(h,c,i,i+o),void 0===a&&(e.position+=o),d.size=l,d.version+=1,t.putBuffer(d.data,h,f)}}function h(e,n){e?s(e):(d=n,t.getBuffer(d.data,l))}var d,p;t.getObject(e.id,h)}function h(t,e,n,r,i,o,a){function s(t,s){if(t)a(t);else{if(f=s,!f)return a(new ke.EIO("Expected Buffer"));var u=void 0!==o&&null!==o?o:e.position;i=u+i>n.length?i-u:i,f.copy(n,r,u,u+i),void 0===o&&(e.position+=i),a(null,i)}}function u(n,r){n?a(n):"DIRECTORY"===r.mode?a(new ke.EISDIR("the named file is a directory",e.path)):(c=r,t.getBuffer(c.data,s))}var c,f;t.getObject(e.id,u)}function d(t,e,n){e=de(e),ge(e),i(t,e,n)}function p(t,e,n){e.getNode(t,n)}function g(t,e,n){function r(e,r){e?n(e):(a=r,t.getObject(a.data,o))}function o(r,i){r?n(r):(s=i,le(s).has(u)?t.getObject(s[u].id,n):n(new ke.ENOENT("a component of the path does not name an existing file",e)))}e=de(e);var a,s,u=ge(e),c=pe(e);Ie==u?i(t,e,n):i(t,c,r)}function m(t,e,r,o){function a(e){e?o(e):n(t,r,b,{ctime:Date.now()},o)}function s(e,n){e?o(e):(b=n,b.nlinks+=1,t.putObject(b.id,b,a))}function u(e){e?o(e):t.getObject(y[E].id,s)}function c(e,n){e?o(e):(y=n,le(y).has(E)?o(new ke.EEXIST("newpath resolves to an existing file",E)):(y[E]=m[d],t.putObject(v.data,y,u)))}function f(e,n){e?o(e):(v=n,t.getObject(v.data,c))}function l(e,n){e?o(e):(m=n,le(m).has(d)?i(t,w,f):o(new ke.ENOENT("a component of either path prefix does not exist",d)))}function h(e,n){e?o(e):(g=n,t.getObject(g.data,l))}e=de(e);var d=ge(e),p=pe(e);r=de(r);var g,m,v,y,b,E=ge(r),w=pe(r);i(t,p,h)}function v(t,e,r){function o(e){e?r(e):(delete h[p],t.putObject(l.data,h,function(){var e=Date.now();n(t,g,l,{mtime:e,ctime:e},r)}))}function a(e){e?r(e):t.delete(d.data,o)}function s(i,s){i?r(i):(d=s,d.nlinks-=1,1>d.nlinks?t.delete(d.id,a):t.putObject(d.id,d,function(){n(t,e,d,{ctime:Date.now()},o)}))}function u(t,e){t?r(t):"DIRECTORY"===e.mode?r(new ke.EPERM("unlink not permitted on directories",p)):s(null,e)}function c(e,n){e?r(e):(h=n,le(h).has(p)?t.getObject(h[p].id,u):r(new ke.ENOENT("a component of the path does not name an existing file",p)))}function f(e,n){e?r(e):(l=n,t.getObject(l.data,c))}e=de(e);var l,h,d,p=ge(e),g=pe(e);i(t,g,f)}function y(t,e,n){function r(t,e){if(t)n(t);else{s=e;var r=Object.keys(s);n(null,r)}}function o(i,o){i?n(i):o.mode!==Ee?n(new ke.ENOTDIR(null,e)):(a=o,t.getObject(a.data,r))}e=de(e),ge(e);var a,s;i(t,e,o)}function b(t,e,r,o){function a(e,n){e?o(e):(l=n,t.getObject(l.data,s))}function s(t,e){t?o(t):(h=e,le(h).has(p)?o(new ke.EEXIST(null,p)):u())}function u(){Ve.create({guid:t.guid,mode:we},function(n,r){return n?(o(n),void 0):(d=r,d.nlinks+=1,d.size=e.length,d.data=e,t.putObject(d.id,d,f),void 0)})}function c(e){if(e)o(e);else{var r=Date.now();n(t,g,l,{mtime:r,ctime:r},o)}}function f(e){e?o(e):(h[p]=new Fe(d.id,we),t.putObject(l.data,h,c))}r=de(r);var l,h,d,p=ge(r),g=pe(r);Ie==p?o(new ke.EEXIST(null,p)):i(t,g,a)}function E(t,e,n){function r(e,r){e?n(e):(s=r,t.getObject(s.data,o))}function o(e,r){e?n(e):(u=r,le(u).has(c)?t.getObject(u[c].id,a):n(new ke.ENOENT("a component of the path does not name an existing file",c)))}function a(t,r){t?n(t):r.mode!=we?n(new ke.EINVAL("path not a symbolic link",e)):n(null,r.data)}e=de(e);var s,u,c=ge(e),f=pe(e);i(t,f,r)}function w(t,e,r,o){function a(n,r){n?o(n):r.mode==Ee?o(new ke.EISDIR(null,e)):(f=r,t.getBuffer(f.data,s))}function s(e,n){if(e)o(e);else{if(!n)return o(new ke.EIO("Expected Buffer"));var i=new Xe(r);i.fill(0),n&&n.copy(i),t.putBuffer(f.data,i,c)}}function u(r){if(r)o(r);else{var i=Date.now();n(t,e,f,{mtime:i,ctime:i},o)}}function c(e){e?o(e):(f.size=r,f.version+=1,t.putObject(f.id,f,u))}e=de(e);var f;0>r?o(new ke.EINVAL("length cannot be negative")):i(t,e,a)}function O(t,e,r,i){function o(e,n){e?i(e):n.mode==Ee?i(new ke.EISDIR):(c=n,t.getBuffer(c.data,a))}function a(e,n){if(e)i(e);else{var o;if(!n)return i(new ke.EIO("Expected Buffer"));n?o=n.slice(0,r):(o=new Xe(r),o.fill(0)),t.putBuffer(c.data,o,u)}}function s(r){if(r)i(r);else{var o=Date.now();n(t,e.path,c,{mtime:o,ctime:o},i)}}function u(e){e?i(e):(c.size=r,c.version+=1,t.putObject(c.id,c,s))}var c;0>r?i(new ke.EINVAL("length cannot be negative")):e.getNode(t,o)}function I(t,e,r,o,a){function s(i,s){i?a(i):n(t,e,s,{atime:r,ctime:o,mtime:o},a)}e=de(e),"number"!=typeof r||"number"!=typeof o?a(new ke.EINVAL("atime and mtime must be number",e)):0>r||0>o?a(new ke.EINVAL("atime and mtime must be positive integers",e)):i(t,e,s)}function _(t,e,r,i,o){function a(a,s){a?o(a):n(t,e.path,s,{atime:r,ctime:i,mtime:i},o)}"number"!=typeof r||"number"!=typeof i?o(new ke.EINVAL("atime and mtime must be a number")):0>r||0>i?o(new ke.EINVAL("atime and mtime must be positive integers")):e.getNode(t,a)}function j(t,e,n,r,a,s){function u(i,u){return i?s(i):(o(t,e,u,n,r,a,s),void 0)}e=de(e),"string"!=typeof n?s(new ke.EINVAL("attribute name must be a string",e)):n?null!==a&&a!==Re&&a!==Le?s(new ke.EINVAL("invalid flag, must be null, XATTR_CREATE or XATTR_REPLACE",e)):i(t,e,u):s(new ke.EINVAL("attribute name cannot be an empty string",e))}function A(t,e,n,r,i,a){function s(s,u){return s?a(s):(o(t,e.path,u,n,r,i,a),void 0)}"string"!=typeof n?a(new ke.EINVAL("attribute name must be a string")):n?null!==i&&i!==Re&&i!==Le?a(new ke.EINVAL("invalid flag, must be null, XATTR_CREATE or XATTR_REPLACE")):e.getNode(t,s):a(new ke.EINVAL("attribute name cannot be an empty string"))}function x(t,e,n,r){function o(t,i){if(t)return r(t);var o=i.xattrs;o.hasOwnProperty(n)?r(null,o[n]):r(new ke.ENOATTR(null,e))}e=de(e),"string"!=typeof n?r(new ke.EINVAL("attribute name must be a string",e)):n?i(t,e,o):r(new ke.EINVAL("attribute name cannot be an empty string",e))}function T(t,e,n,r){function i(t,e){if(t)return r(t);var i=e.xattrs;i.hasOwnProperty(n)?r(null,i[n]):r(new ke.ENOATTR)}"string"!=typeof n?r(new ke.EINVAL):n?e.getNode(t,i):r(new ke.EINVAL("attribute name cannot be an empty string"))}function S(t,e,r,o){function a(i,a){function s(r){r?o(r):n(t,e,a,{ctime:Date.now()},o)}if(i)return o(i);var u=a.xattrs;u.hasOwnProperty(r)?(delete u[r],t.putObject(a.id,a,s)):o(new ke.ENOATTR(null,e))}e=de(e),"string"!=typeof r?o(new ke.EINVAL("attribute name must be a string",e)):r?i(t,e,a):o(new ke.EINVAL("attribute name cannot be an empty string",e))}function N(t,e,r,i){function o(o,a){function s(r){r?i(r):n(t,e.path,a,{ctime:Date.now()},i)}if(o)return i(o);var u=a.xattrs;u.hasOwnProperty(r)?(delete u[r],t.putObject(a.id,a,s)):i(new ke.ENOATTR)}"string"!=typeof r?i(new ke.EINVAL("attribute name must be a string")):r?e.getNode(t,o):i(new ke.EINVAL("attribute name cannot be an empty string"))}function D(t){return le(De).has(t)?De[t]:null}function R(t,e,n){return t?"function"==typeof t?t={encoding:e,flag:n}:"string"==typeof t&&(t={encoding:t,flag:n}):t={encoding:e,flag:n},t}function L(t,e){var n;return t?ve(t)?n=new ke.EINVAL("Path must be a string without null bytes.",t):me(t)||(n=new ke.EINVAL("Path must be absolute.",t)):n=new ke.EINVAL("Path must be a string",t),n?(e(n),!1):!0}function B(t,e,n,r,i,o){function a(e,i){if(e)o(e);else{var a;a=le(r).contains(Ne)?i.size:0;var s=new Pe(n,i.id,r,a),u=t.allocDescriptor(s);o(null,u)}}o=arguments[arguments.length-1],L(n,o)&&(r=D(r),r||o(new ke.EINVAL("flags is not valid"),n),c(e,n,r,a))}function C(t,e,n,r){le(t.openFiles).has(n)?(t.releaseDescriptor(n),r(null)):r(new ke.EBADF)}function M(t,e,n,i,o){L(n,o)&&r(e,n,i,o)}function k(t,e,n,r,i){i=arguments[arguments.length-1],L(n,i)&&s(e,n,i)}function F(t,e,n,r){L(n,r)&&u(e,n,r)}function P(t,e,n,r){function i(e,n){if(e)r(e);else{var i=new Ye(n,t.name);r(null,i)}}L(n,r)&&d(e,n,i)}function U(t,e,n,r){function i(e,n){if(e)r(e);else{var i=new Ye(n,t.name);r(null,i)}}var o=t.openFiles[n];o?p(e,o,i):r(new ke.EBADF)}function V(t,e,n,r,i){L(n,i)&&L(r,i)&&m(e,n,r,i)}function Y(t,e,n,r){L(n,r)&&v(e,n,r)}function X(t,e,n,r,i,o,a,s){function u(t,e){s(t,e||0,r)}i=void 0===i?0:i,o=void 0===o?r.length-i:o,s=arguments[arguments.length-1];var c=t.openFiles[n];c?le(c.flags).contains(Ae)?h(e,c,r,i,o,a,u):s(new ke.EBADF("descriptor does not permit reading")):s(new ke.EBADF)}function z(t,e,n,r,i){if(i=arguments[arguments.length-1],r=R(r,null,"r"),L(n,i)){var o=D(r.flag||"r");return o?(c(e,n,o,function(a,s){function u(){t.releaseDescriptor(f)}if(a)return i(a);var c=new Pe(n,s.id,o,0),f=t.allocDescriptor(c);p(e,c,function(o,a){if(o)return u(),i(o);var s=new Ye(a,t.name);if(s.isDirectory())return u(),i(new ke.EISDIR("illegal operation on directory",n));var f=s.size,l=new Xe(f);l.fill(0),h(e,c,l,0,f,0,function(t){if(u(),t)return i(t);var e;e="utf8"===r.encoding?Me.decode(l):l,i(null,e)})})}),void 0):i(new ke.EINVAL("flags is not valid",n))}}function W(t,e,n,r,i,o,a,s){s=arguments[arguments.length-1],i=void 0===i?0:i,o=void 0===o?r.length-i:o;var u=t.openFiles[n];u?le(u.flags).contains(xe)?o>r.length-i?s(new ke.EIO("intput buffer is too small")):l(e,u,r,i,o,a,s):s(new ke.EBADF("descriptor does not permit writing")):s(new ke.EBADF)}function J(t,e,n,r,i,o){if(o=arguments[arguments.length-1],i=R(i,"utf8","w"),L(n,o)){var a=D(i.flag||"w");if(!a)return o(new ke.EINVAL("flags is not valid",n));r=r||"","number"==typeof r&&(r=""+r),"string"==typeof r&&"utf8"===i.encoding&&(r=Me.encode(r)),c(e,n,a,function(i,s){if(i)return o(i);var u=new Pe(n,s.id,a,0),c=t.allocDescriptor(u);f(e,u,r,0,r.length,function(e){return t.releaseDescriptor(c),e?o(e):(o(null),void 0)})})}}function q(t,e,n,r,i,o){if(o=arguments[arguments.length-1],i=R(i,"utf8","a"),L(n,o)){var a=D(i.flag||"a");if(!a)return o(new ke.EINVAL("flags is not valid",n));r=r||"","number"==typeof r&&(r=""+r),"string"==typeof r&&"utf8"===i.encoding&&(r=Me.encode(r)),c(e,n,a,function(i,s){if(i)return o(i);var u=new Pe(n,s.id,a,s.size),c=t.allocDescriptor(u);l(e,u,r,0,r.length,u.position,function(e){return t.releaseDescriptor(c),e?o(e):(o(null),void 0)})})}}function $(t,e,n,r){function i(t){r(t?!1:!0)}P(t,e,n,i)}function Q(t,e,n,r,i){L(n,i)&&x(e,n,r,i)}function H(t,e,n,r,i){var o=t.openFiles[n];o?T(e,o,r,i):i(new ke.EBADF)}function G(t,e,n,r,i,o,a){"function"==typeof o&&(a=o,o=null),L(n,a)&&j(e,n,r,i,o,a)}function K(t,e,n,r,i,o,a){"function"==typeof o&&(a=o,o=null);var s=t.openFiles[n];s?le(s.flags).contains(xe)?A(e,s,r,i,o,a):a(new ke.EBADF("descriptor does not permit writing")):a(new ke.EBADF)}function Z(t,e,n,r,i){L(n,i)&&S(e,n,r,i)}function te(t,e,n,r,i){var o=t.openFiles[n];o?le(o.flags).contains(xe)?N(e,o,r,i):i(new ke.EBADF("descriptor does not permit writing")):i(new ke.EBADF)}function ee(t,e,n,r,i,o){function a(t,e){t?o(t):0>e.size+r?o(new ke.EINVAL("resulting file offset would be negative")):(s.position=e.size+r,o(null,s.position))}var s=t.openFiles[n];s||o(new ke.EBADF),"SET"===i?0>r?o(new ke.EINVAL("resulting file offset would be negative")):(s.position=r,o(null,s.position)):"CUR"===i?0>s.position+r?o(new ke.EINVAL("resulting file offset would be negative")):(s.position+=r,o(null,s.position)):"END"===i?p(e,s,a):o(new ke.EINVAL("whence argument is not a proper value"))}function ne(t,e,n,r){L(n,r)&&y(e,n,r)}function re(t,e,n,r,i,o){if(L(n,o)){var a=Date.now();r=r?r:a,i=i?i:a,I(e,n,r,i,o)}}function ie(t,e,n,r,i,o){var a=Date.now();r=r?r:a,i=i?i:a;var s=t.openFiles[n];s?le(s.flags).contains(xe)?_(e,s,r,i,o):o(new ke.EBADF("descriptor does not permit writing")):o(new ke.EBADF)}function oe(t,e,r,o,a){function s(t,r){t?a(t):n(e,o,r,{ctime:Date.now()},a)}function c(t){t?a(t):e.getObject(I[x].id,s)}function f(t){t?a(t):(delete w[A],e.putObject(E.data,w,c))}function l(t){t?a(t):(I[x]=w[A],e.putObject(O.data,I,f))}function h(t,n){t?a(t):(I=n,le(I).has(x)?u(e,o,l):l())}function d(t,n){t?a(t):(O=n,e.getObject(O.data,h))}function p(t,n){t?a(t):(w=n,i(e,j,d))}function g(t,n){t?a(t):(E=n,e.getObject(n.data,p))}function y(t){t?a(t):v(e,r,a)}function b(t,n){t?a(t):"DIRECTORY"===n.mode?i(e,_,g):m(e,r,o,y)}if(L(r,a)&&L(o,a)){var E,w,O,I,_=he.dirname(r),j=he.dirname(r),A=he.basename(r),x=he.basename(o);i(e,r,b)}}function ae(t,e,n,r,i,o){o=arguments[arguments.length-1],L(n,o)&&L(r,o)&&b(e,n,r,o)}function se(t,e,n,r){L(n,r)&&E(e,n,r)}function ue(t,e,n,r){function i(e,n){if(e)r(e);else{var i=new Ye(n,t.name);r(null,i)}}L(n,r)&&g(e,n,i)}function ce(t,e,n,r,i){i=arguments[arguments.length-1],r=r||0,L(n,i)&&w(e,n,r,i)}function fe(t,e,n,r,i){i=arguments[arguments.length-1],r=r||0;var o=t.openFiles[n];o?le(o.flags).contains(xe)?O(e,o,r,i):i(new ke.EBADF("descriptor does not permit writing")):i(new ke.EBADF)}var le=t("../../lib/nodash.js"),he=t("../path.js"),de=he.normalize,pe=he.dirname,ge=he.basename,me=he.isAbsolute,ve=he.isNull,ye=t("../constants.js"),be=ye.MODE_FILE,Ee=ye.MODE_DIRECTORY,we=ye.MODE_SYMBOLIC_LINK,Oe=ye.MODE_META,Ie=ye.ROOT_DIRECTORY_NAME,_e=ye.SUPER_NODE_ID,je=ye.SYMLOOP_MAX,Ae=ye.O_READ,xe=ye.O_WRITE,Te=ye.O_CREATE,Se=ye.O_EXCLUSIVE;ye.O_TRUNCATE;var Ne=ye.O_APPEND,De=ye.O_FLAGS,Re=ye.XATTR_CREATE,Le=ye.XATTR_REPLACE,Be=ye.FS_NOMTIME,Ce=ye.FS_NOCTIME,Me=t("../encoding.js"),ke=t("../errors.js"),Fe=t("../directory-entry.js"),Pe=t("../open-file-description.js"),Ue=t("../super-node.js"),Ve=t("../node.js"),Ye=t("../stats.js"),Xe=t("../buffer.js");e.exports={ensureRootDirectory:a,open:B,close:C,mknod:M,mkdir:k,rmdir:F,unlink:Y,stat:P,fstat:U,link:V,read:X,readFile:z,write:W,writeFile:J,appendFile:q,exists:$,getxattr:Q,fgetxattr:H,setxattr:G,fsetxattr:K,removexattr:Z,fremovexattr:te,lseek:ee,readdir:ne,utimes:re,futimes:ie,rename:oe,symlink:ae,readlink:se,lstat:ue,truncate:ce,ftruncate:fe}},{"../../lib/nodash.js":4,"../buffer.js":14,"../constants.js":15,"../directory-entry.js":16,"../encoding.js":17,"../errors.js":18,"../node.js":23,"../open-file-description.js":24,"../path.js":25,"../stats.js":33,"../super-node.js":34}],20:[function(t,e){function n(t){return"function"==typeof t?t:function(t){if(t)throw t}}function r(t){t&&console.error("Filer error: ",t)}function i(t,e){function n(){B.forEach(function(t){t.call(this)}.bind(D)),B=null}function i(t){return function(e){function n(e){var r=x();t.getObject(r,function(t,i){return t?(e(t),void 0):(i?n(e):e(null,r),void 0)})}return o(A).contains(p)?(e(null,x()),void 0):(n(e),void 0)}}function u(t){if(t.length){var e=v.getInstance();t.forEach(function(t){e.emit(t.event,t.path)})}}t=t||{},e=e||r;var A=t.flags,x=t.guid?t.guid:E,T=t.provider||new g.Default(t.name||c),S=t.name||T.name,N=o(A).contains(f),D=this;D.readyState=h,D.name=S,D.error=null,D.stdin=w,D.stdout=O,D.stderr=I,this.Shell=m.bind(void 0,this);var R={},L=_;Object.defineProperty(this,"openFiles",{get:function(){return R}}),this.allocDescriptor=function(t){var e=L++;return R[e]=t,e},this.releaseDescriptor=function(t){delete R[t]};var B=[];this.queueOrRun=function(t){var e;
return l==D.readyState?t.call(D):d==D.readyState?e=new b.EFILESYSTEMERROR("unknown error"):B.push(t),e},this.watch=function(t,e,n){if(a(t))throw Error("Path must be a string without null bytes.");"function"==typeof e&&(n=e,e={}),e=e||{},n=n||s;var r=new y;return r.start(t,!1,e.recursive),r.on("change",n),r},T.open(function(t){function r(t){function r(t){var e=T[t]();return e.flags=A,e.changes=[],e.guid=i(e),e.close=function(){var t=e.changes;u(t),t.length=0},e}D.provider={openReadWriteContext:function(){return r("getReadWriteContext")},openReadOnlyContext:function(){return r("getReadOnlyContext")}},D.readyState=t?d:l,n(),e(t,D)}if(t)return r(t);var o=T.getReadWriteContext();o.guid=i(o),N?o.clear(function(t){return t?r(t):(j.ensureRootDirectory(o,r),void 0)}):j.ensureRootDirectory(o,r)})}var o=t("../../lib/nodash.js"),a=t("../path.js").isNull,s=t("../shared.js").nop,u=t("../constants.js"),c=u.FILE_SYSTEM_NAME,f=u.FS_FORMAT,l=u.FS_READY,h=u.FS_PENDING,d=u.FS_ERROR,p=u.FS_NODUPEIDCHECK,g=t("../providers/index.js"),m=t("../shell/shell.js"),v=t("../../lib/intercom.js"),y=t("../fs-watcher.js"),b=t("../errors.js"),E=t("../shared.js").guid,w=u.STDIN,O=u.STDOUT,I=u.STDERR,_=u.FIRST_DESCRIPTOR,j=t("./implementation.js");i.providers=g,["open","close","mknod","mkdir","rmdir","stat","fstat","link","unlink","read","readFile","write","writeFile","appendFile","exists","lseek","readdir","rename","readlink","symlink","lstat","truncate","ftruncate","utimes","futimes","setxattr","getxattr","fsetxattr","fgetxattr","removexattr","fremovexattr"].forEach(function(t){i.prototype[t]=function(){var e=this,r=Array.prototype.slice.call(arguments,0),i=r.length-1,o="function"!=typeof r[i],a=n(r[i]),s=e.queueOrRun(function(){function n(){s.close(),a.apply(e,arguments)}var s=e.provider.openReadWriteContext();if(d===e.readyState){var u=new b.EFILESYSTEMERROR("filesystem unavailable, operation canceled");return a.call(e,u)}o?r.push(n):r[i]=n;var c=[e,s].concat(r);j[t].apply(null,c)});s&&a(s)}}),e.exports=i},{"../../lib/intercom.js":3,"../../lib/nodash.js":4,"../constants.js":15,"../errors.js":18,"../fs-watcher.js":21,"../path.js":25,"../providers/index.js":26,"../shared.js":30,"../shell/shell.js":32,"./implementation.js":19}],21:[function(t,e){function n(){function t(t){(n===t||s&&0===t.indexOf(e))&&a.trigger("change","change",t)}r.call(this);var e,n,a=this,s=!1;a.start=function(r,a,u){if(!n){if(i.isNull(r))throw Error("Path must be a string without null bytes.");n=i.normalize(r),s=u===!0,s&&(e="/"===n?"/":n+"/");var c=o.getInstance();c.on("change",t)}},a.close=function(){var e=o.getInstance();e.off("change",t),a.removeAllListeners("change")}}var r=t("../lib/eventemitter.js"),i=t("./path.js"),o=t("../lib/intercom.js");n.prototype=new r,n.prototype.constructor=n,e.exports=n},{"../lib/eventemitter.js":2,"../lib/intercom.js":3,"./path.js":25}],22:[function(t,e){e.exports={FileSystem:t("./filesystem/interface.js"),Buffer:t("./buffer.js"),Path:t("./path.js"),Errors:t("./errors.js"),Shell:t("./shell/shell.js")}},{"./buffer.js":14,"./errors.js":18,"./filesystem/interface.js":20,"./path.js":25,"./shell/shell.js":32}],23:[function(t,e){function n(t){var e=Date.now();this.id=t.id,this.mode=t.mode||i,this.size=t.size||0,this.atime=t.atime||e,this.ctime=t.ctime||e,this.mtime=t.mtime||e,this.flags=t.flags||[],this.xattrs=t.xattrs||{},this.nlinks=t.nlinks||0,this.version=t.version||0,this.blksize=void 0,this.nblocks=1,this.data=t.data}function r(t,e,n){t[e]?n(null):t.guid(function(r,i){t[e]=i,n(r)})}var i=t("./constants.js").MODE_FILE;n.create=function(t,e){r(t,"id",function(i){return i?(e(i),void 0):(r(t,"data",function(r){return r?(e(r),void 0):(e(null,new n(t)),void 0)}),void 0)})},e.exports=n},{"./constants.js":15}],24:[function(t,e){function n(t,e,n,r){this.path=t,this.id=e,this.flags=n,this.position=r}var r=t("./errors.js");n.prototype.getNode=function(t,e){function n(t,n){return t?e(t):n?(e(null,n),void 0):e(new r.EBADF("file descriptor refers to unknown node",o))}var i=this.id,o=this.path;t.getObject(i,n)},e.exports=n},{"./errors.js":18}],25:[function(t,e,n){function r(t,e){for(var n=0,r=t.length-1;r>=0;r--){var i=t[r];"."===i?t.splice(r,1):".."===i?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function i(){for(var t="",e=!1,n=arguments.length-1;n>=-1&&!e;n--){var i=n>=0?arguments[n]:"/";"string"==typeof i&&i&&(t=i+"/"+t,e="/"===i.charAt(0))}return t=r(t.split("/").filter(function(t){return!!t}),!e).join("/"),(e?"/":"")+t||"."}function o(t){var e="/"===t.charAt(0);return"/"===t.substr(-1),t=r(t.split("/").filter(function(t){return!!t}),!e).join("/"),t||e||(t="."),(e?"/":"")+t}function a(){var t=Array.prototype.slice.call(arguments,0);return o(t.filter(function(t){return t&&"string"==typeof t}).join("/"))}function s(t,e){function r(t){for(var e=0;t.length>e&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=n.resolve(t).substr(1),e=n.resolve(e).substr(1);for(var i=r(t.split("/")),o=r(e.split("/")),a=Math.min(i.length,o.length),s=a,u=0;a>u;u++)if(i[u]!==o[u]){s=u;break}for(var c=[],u=s;i.length>u;u++)c.push("..");return c=c.concat(o.slice(s)),c.join("/")}function u(t){var e=m(t),n=e[0],r=e[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."}function c(t,e){var n=m(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),""===n?"/":n}function f(t){return m(t)[3]}function l(t){return"/"===t.charAt(0)?!0:!1}function h(t){return-1!==(""+t).indexOf("\0")?!0:!1}function d(t){return t.replace(/\/*$/,"/")}function p(t){return t=t.replace(/\/*$/,""),""===t?"/":t}var g=/^(\/?)([\s\S]+\/(?!$)|\/)?((?:\.{1,2}$|[\s\S]+?)?(\.[^.\/]*)?)$/,m=function(t){var e=g.exec(t);return[e[1]||"",e[2]||"",e[3]||"",e[4]||""]};e.exports={normalize:o,resolve:i,join:a,relative:s,sep:"/",delimiter:":",dirname:u,basename:c,extname:f,isAbsolute:l,isNull:h,addTrailing:d,removeTrailing:p}},{}],26:[function(t,e){var n=t("./indexeddb.js"),r=t("./websql.js"),i=t("./memory.js");e.exports={IndexedDB:n,WebSQL:r,Memory:i,Default:n,Fallback:function(){function t(){throw"[Filer Error] Your browser doesn't support IndexedDB or WebSQL."}return n.isSupported()?n:r.isSupported()?r:(t.isSupported=function(){return!1},t)}()}},{"./indexeddb.js":27,"./memory.js":28,"./websql.js":29}],27:[function(t,e){(function(n,r){function i(t,e){var n=t.transaction(c,e);this.objectStore=n.objectStore(c)}function o(t,e,n){try{var r=t.get(e);r.onsuccess=function(t){var e=t.target.result;n(null,e)},r.onerror=function(t){n(t)}}catch(i){n(i)}}function a(t,e,n,r){try{var i=t.put(n,e);i.onsuccess=function(t){var e=t.target.result;r(null,e)},i.onerror=function(t){r(t)}}catch(o){r(o)}}function s(t){this.name=t||u,this.db=null}var u=t("../constants.js").FILE_SYSTEM_NAME,c=t("../constants.js").FILE_STORE_NAME,f=t("../constants.js").IDB_RW;t("../constants.js").IDB_RO;var l=t("../errors.js"),h=t("../buffer.js"),d=n.indexedDB||n.mozIndexedDB||n.webkitIndexedDB||n.msIndexedDB;i.prototype.clear=function(t){try{var e=this.objectStore.clear();e.onsuccess=function(){t()},e.onerror=function(e){t(e)}}catch(n){t(n)}},i.prototype.getObject=function(t,e){o(this.objectStore,t,e)},i.prototype.getBuffer=function(t,e){o(this.objectStore,t,function(t,n){return t?e(t):(e(null,new h(n)),void 0)})},i.prototype.putObject=function(t,e,n){a(this.objectStore,t,e,n)},i.prototype.putBuffer=function(t,e,n){var i;i=r._useTypedArrays?e.buffer:e.toArrayBuffer(),a(this.objectStore,t,i,n)},i.prototype.delete=function(t,e){try{var n=this.objectStore.delete(t);n.onsuccess=function(t){var n=t.target.result;e(null,n)},n.onerror=function(t){e(t)}}catch(r){e(r)}},s.isSupported=function(){return!!d},s.prototype.open=function(t){var e=this;if(e.db)return t();var n=d.open(e.name);n.onupgradeneeded=function(t){var e=t.target.result;e.objectStoreNames.contains(c)&&e.deleteObjectStore(c),e.createObjectStore(c)},n.onsuccess=function(n){e.db=n.target.result,t()},n.onerror=function(){t(new l.EINVAL("IndexedDB cannot be accessed. If private browsing is enabled, disable it."))}},s.prototype.getReadOnlyContext=function(){return new i(this.db,f)},s.prototype.getReadWriteContext=function(){return new i(this.db,f)},e.exports=s}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer)},{"../buffer.js":14,"../constants.js":15,"../errors.js":18,buffer:6}],28:[function(t,e){function n(t,e){this.readOnly=e,this.objectStore=t}function r(t){this.name=t||i}var i=t("../constants.js").FILE_SYSTEM_NAME,o=t("../../lib/async.js").setImmediate,a=function(){var t={};return function(e){return t.hasOwnProperty(e)||(t[e]={}),t[e]}}();n.prototype.clear=function(t){if(this.readOnly)return o(function(){t("[MemoryContext] Error: write operation on read only context")}),void 0;var e=this.objectStore;Object.keys(e).forEach(function(t){delete e[t]}),o(t)},n.prototype.getObject=n.prototype.getBuffer=function(t,e){var n=this;o(function(){e(null,n.objectStore[t])})},n.prototype.putObject=n.prototype.putBuffer=function(t,e,n){return this.readOnly?(o(function(){n("[MemoryContext] Error: write operation on read only context")}),void 0):(this.objectStore[t]=e,o(n),void 0)},n.prototype.delete=function(t,e){return this.readOnly?(o(function(){e("[MemoryContext] Error: write operation on read only context")}),void 0):(delete this.objectStore[t],o(e),void 0)},r.isSupported=function(){return!0},r.prototype.open=function(t){this.db=a(this.name),o(t)},r.prototype.getReadOnlyContext=function(){return new n(this.db,!0)},r.prototype.getReadWriteContext=function(){return new n(this.db,!1)},e.exports=r},{"../../lib/async.js":1,"../constants.js":15}],29:[function(t,e){(function(n){function r(t,e){var n=this;this.getTransaction=function(r){return n.transaction?(r(n.transaction),void 0):(t[e?"readTransaction":"transaction"](function(t){n.transaction=t,r(t)}),void 0)}}function i(t,e,n){function r(t,e){var r=0===e.rows.length?null:e.rows.item(0).data;n(null,r)}function i(t,e){n(e)}t(function(t){t.executeSql("SELECT data FROM "+u+" WHERE id = ? LIMIT 1;",[e],r,i)})}function o(t,e,n,r){function i(){r(null)}function o(t,e){r(e)}t(function(t){t.executeSql("INSERT OR REPLACE INTO "+u+" (id, data) VALUES (?, ?);",[e,n],i,o)})}function a(t){this.name=t||s,this.db=null}var s=t("../constants.js").FILE_SYSTEM_NAME,u=t("../constants.js").FILE_STORE_NAME,c=t("../constants.js").WSQL_VERSION,f=t("../constants.js").WSQL_SIZE,l=t("../constants.js").WSQL_DESC,h=t("../errors.js"),d=t("../buffer.js"),p=t("base64-arraybuffer");r.prototype.clear=function(t){function e(e,n){t(n)}function n(){t(null)}this.getTransaction(function(t){t.executeSql("DELETE FROM "+u+";",[],n,e)})},r.prototype.getObject=function(t,e){i(this.getTransaction,t,function(t,n){if(t)return e(t);try{n&&(n=JSON.parse(n))}catch(r){return e(r)}e(null,n)})},r.prototype.getBuffer=function(t,e){i(this.getTransaction,t,function(t,n){if(t)return e(t);if(n||""===n){var r=p.decode(n);n=new d(r)}e(null,n)})},r.prototype.putObject=function(t,e,n){var r=JSON.stringify(e);o(this.getTransaction,t,r,n)},r.prototype.putBuffer=function(t,e,n){var r=p.encode(e.buffer);o(this.getTransaction,t,r,n)},r.prototype.delete=function(t,e){function n(){e(null)}function r(t,n){e(n)}this.getTransaction(function(e){e.executeSql("DELETE FROM "+u+" WHERE id = ?;",[t],n,r)})},a.isSupported=function(){return!!n.openDatabase},a.prototype.open=function(t){function e(e,n){5===n.code&&t(new h.EINVAL("WebSQL cannot be accessed. If private browsing is enabled, disable it.")),t(n)}function r(){i.db=o,t()}var i=this;if(i.db)return t();var o=n.openDatabase(i.name,c,l,f);return o?(o.transaction(function(t){function n(t){t.executeSql("CREATE INDEX IF NOT EXISTS idx_"+u+"_id"+" on "+u+" (id);",[],r,e)}t.executeSql("CREATE TABLE IF NOT EXISTS "+u+" (id unique, data TEXT);",[],n,e)}),void 0):(t("[WebSQL] Unable to open database."),void 0)},a.prototype.getReadOnlyContext=function(){return new r(this.db,!0)},a.prototype.getReadWriteContext=function(){return new r(this.db,!1)},e.exports=a}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../buffer.js":14,"../constants.js":15,"../errors.js":18,"base64-arraybuffer":5}],30:[function(t,e){function n(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=0|16*Math.random(),n="x"==t?e:8|3&e;return n.toString(16)}).toUpperCase()}function r(){}function i(t){for(var e=[],n=t.length,r=0;n>r;r++)e[r]=t[r];return e}e.exports={guid:n,u8toArray:i,nop:r}},{}],31:[function(t,e){var n=t("../constants.js").ENVIRONMENT;e.exports=function(t){t=t||{},t.TMP=t.TMP||n.TMP,t.PATH=t.PATH||n.PATH,this.get=function(e){return t[e]},this.set=function(e,n){t[e]=n}}},{"../constants.js":15}],32:[function(t,e){function n(t,e){e=e||{};var n=new o(e.env),a="/";Object.defineProperty(this,"fs",{get:function(){return t},enumerable:!0}),Object.defineProperty(this,"env",{get:function(){return n},enumerable:!0}),this.cd=function(e,n){e=r.resolve(a,e),t.stat(e,function(t,r){return t?(n(new i.ENOTDIR(null,e)),void 0):("DIRECTORY"===r.type?(a=e,n()):n(new i.ENOTDIR(null,e)),void 0)})},this.pwd=function(){return a}}var r=t("../path.js"),i=t("../errors.js"),o=t("./environment.js"),a=t("../../lib/async.js");t("../encoding.js");var s=t("minimatch");n.prototype.exec=function(t,e,n){var i=this,o=i.fs;"function"==typeof e&&(n=e,e=[]),e=e||[],n=n||function(){},t=r.resolve(i.pwd(),t),o.readFile(t,"utf8",function(t,r){if(t)return n(t),void 0;try{var i=Function("fs","args","callback",r);i(o,e,n)}catch(a){n(a)}})},n.prototype.touch=function(t,e,n){function i(t){s.writeFile(t,"",n)}function o(t){var r=Date.now(),i=e.date||r,o=e.date||r;s.utimes(t,i,o,n)}var a=this,s=a.fs;"function"==typeof e&&(n=e,e={}),e=e||{},n=n||function(){},t=r.resolve(a.pwd(),t),s.stat(t,function(r){r?e.updateOnly===!0?n():i(t):o(t)})},n.prototype.cat=function(t,e){function n(t,e){var n=r.resolve(o.pwd(),t);s.readFile(n,"utf8",function(t,n){return t?(e(t),void 0):(u+=n+"\n",e(),void 0)})}var o=this,s=o.fs,u="";return e=e||function(){},t?(t="string"==typeof t?[t]:t,a.eachSeries(t,n,function(t){t?e(t):e(null,u.replace(/\n$/,""))}),void 0):(e(new i.EINVAL("Missing files argument")),void 0)},n.prototype.ls=function(t,e,n){function o(t,n){var i=r.resolve(s.pwd(),t),c=[];u.readdir(i,function(t,s){function f(t,n){t=r.join(i,t),u.stat(t,function(a,s){if(a)return n(a),void 0;var u={path:r.basename(t),links:s.nlinks,size:s.size,modified:s.mtime,type:s.type};e.recursive&&"DIRECTORY"===s.type?o(r.join(i,u.path),function(t,e){return t?(n(t),void 0):(u.contents=e,c.push(u),n(),void 0)}):(c.push(u),n())})}return t?(n(t),void 0):(a.eachSeries(s,f,function(t){n(t,c)}),void 0)})}var s=this,u=s.fs;return"function"==typeof e&&(n=e,e={}),e=e||{},n=n||function(){},t?(o(t,n),void 0):(n(new i.EINVAL("Missing dir argument")),void 0)},n.prototype.rm=function(t,e,n){function o(t,n){t=r.resolve(s.pwd(),t),u.stat(t,function(s,c){return s?(n(s),void 0):"FILE"===c.type?(u.unlink(t,n),void 0):(u.readdir(t,function(s,c){return s?(n(s),void 0):0===c.length?(u.rmdir(t,n),void 0):e.recursive?(c=c.map(function(e){return r.join(t,e)}),a.eachSeries(c,o,function(e){return e?(n(e),void 0):(u.rmdir(t,n),void 0)}),void 0):(n(new i.ENOTEMPTY(null,t)),void 0)}),void 0)})}var s=this,u=s.fs;return"function"==typeof e&&(n=e,e={}),e=e||{},n=n||function(){},t?(o(t,n),void 0):(n(new i.EINVAL("Missing path argument")),void 0)},n.prototype.tempDir=function(t){var e=this,n=e.fs,r=e.env.get("TMP");t=t||function(){},n.mkdir(r,function(){t(null,r)})},n.prototype.mkdirp=function(t,e){function n(t,e){a.stat(t,function(o,s){if(s){if(s.isDirectory())return e(),void 0;if(s.isFile())return e(new i.ENOTDIR(null,t)),void 0}else{if(o&&"ENOENT"!==o.code)return e(o),void 0;var u=r.dirname(t);"/"===u?a.mkdir(t,function(t){return t&&"EEXIST"!=t.code?(e(t),void 0):(e(),void 0)}):n(u,function(n){return n?e(n):(a.mkdir(t,function(t){return t&&"EEXIST"!=t.code?(e(t),void 0):(e(),void 0)}),void 0)})}})}var o=this,a=o.fs;return e=e||function(){},t?"/"===t?(e(),void 0):(n(t,e),void 0):(e(new i.EINVAL("Missing path argument")),void 0)},n.prototype.find=function(t,e,n){function o(t,e){h(t,function(n){return n?(e(n),void 0):(d.push(t),e(),void 0)})}function u(t,n){var i=r.removeTrailing(t);return e.regex&&!e.regex.test(i)?(n(),void 0):e.name&&!s(r.basename(i),e.name)?(n(),void 0):e.path&&!s(r.dirname(i),e.path)?(n(),void 0):(o(t,n),void 0)}function c(t,e){t=r.resolve(f.pwd(),t),l.readdir(t,function(n,i){return n?("ENOTDIR"===n.code?u(t,e):e(n),void 0):(u(r.addTrailing(t),function(n){return n?(e(n),void 0):(i=i.map(function(e){return r.join(t,e)}),a.eachSeries(i,c,function(t){e(t,d)}),void 0)}),void 0)})}var f=this,l=f.fs;"function"==typeof e&&(n=e,e={}),e=e||{},n=n||function(){};var h=e.exec||function(t,e){e()},d=[];return t?(l.stat(t,function(e,r){return e?(n(e),void 0):r.isDirectory()?(c(t,n),void 0):(n(new i.ENOTDIR(null,t)),void 0)}),void 0):(n(new i.EINVAL("Missing path argument")),void 0)},e.exports=n},{"../../lib/async.js":1,"../encoding.js":17,"../errors.js":18,"../path.js":25,"./environment.js":31,minimatch:11}],33:[function(t,e){function n(t,e){this.node=t.id,this.dev=e,this.size=t.size,this.nlinks=t.nlinks,this.atime=t.atime,this.mtime=t.mtime,this.ctime=t.ctime,this.type=t.mode}var r=t("./constants.js");n.prototype.isFile=function(){return this.type===r.MODE_FILE},n.prototype.isDirectory=function(){return this.type===r.MODE_DIRECTORY},n.prototype.isSymbolicLink=function(){return this.type===r.MODE_SYMBOLIC_LINK},n.prototype.isSocket=n.prototype.isFIFO=n.prototype.isCharacterDevice=n.prototype.isBlockDevice=function(){return!1},e.exports=n},{"./constants.js":15}],34:[function(t,e){function n(t){var e=Date.now();this.id=r.SUPER_NODE_ID,this.mode=r.MODE_META,this.atime=t.atime||e,this.ctime=t.ctime||e,this.mtime=t.mtime||e,this.rnode=t.rnode}var r=t("./constants.js");n.create=function(t,e){t.guid(function(r,i){return r?(e(r),void 0):(t.rnode=t.rnode||i,e(null,new n(t)),void 0)})},e.exports=n},{"./constants.js":15}]},{},[22])(22)});